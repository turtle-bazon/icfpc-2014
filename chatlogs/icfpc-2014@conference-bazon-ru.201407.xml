<!DOCTYPE Kopete-History>
<kopete-history version="0.9">
 <head>
  <date month="7" year="2014"/>
  <contact contactId="turtle@bazon.ru" type="myself"/>
  <contact contactId="icfpc-2014@conference.bazon.ru"/>
 </head>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="22 18:12:18">test</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="22 18:12:18">test</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="22 18:19:48">есть тест</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="22 18:19:52">всем привет</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="22 18:19:54">Вижу.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="22 18:21:0">Ждём остальных.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="22 18:29:7">Привет</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="22 18:29:15">Привет. )</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="22 18:40:30">привет</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="22 18:40:33">во отлично</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="22 18:40:53">Все в сборе. :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="22 18:41:11">В общем, осталось меньше 3 суток до старта.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="22 18:41:37">o/</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="22 18:42:12">Я планирую сразу по началу приступить к чтению задания. Как опубликуют.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="22 18:44:3">я смогу часам к 17 ориентировочно в пятницу подтянуться</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="22 18:46:27">Я сразу как будет задание смогу начать.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="22 18:47:37">Судя по всему, авторы заядлые хаскелисты.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="22 18:47:49">я буду сразу</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="22 18:48:4">собсно клиентов предупредил, что с пт по вт меня нет)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="22 18:48:22">И задачу  нужно ожидать, как мы с swizard'ом прикинули, ближе к лямбда калкулюсу и т.д.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="22 18:48:38">Никто, кстати, ничего дополнительно не знает?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="22 18:49:10">нету. может где и есть намеки, но не на оффсайте</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="22 18:52:15">В некоторых исфпц по лого намётки были.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="22 18:52:24">Тут вообще глушак. :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="22 18:55:6">Да, если исходить из того, что хаскеллисты в оргах и называются Well-Typed consultants, то может и да, какие нибудь типы Хиндли-Милнера и прочее с этим связанное. :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="22 18:55:53">можно будет освежить в памяти</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="22 18:56:1">а какие часовые пояса у остальных?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="22 18:56:49">+5 к мск(+9 к utc)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="22 18:57:17">В целом, все в одном, кроме сектоида. :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="22 18:57:26">Но он сказал, что у него сон смещённый. :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="22 18:58:35">Оно может и к лучшему, всегда будет кто-нибудь выспавшийся и со свежим взглядом.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="22 18:58:56">Да, так неплохо было бы.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="22 19:28:43">как раз хорошо</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 11:14:48">Ну. Меньше 5 часов осталось до старта.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 12:49:17">хм, на сайте 0 Day 03 Hour 10 Min 40 Sec</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 12:49:31">получается, в 16:00 по Москве старт, а не в 15</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 12:51:4">«don’t forget to buy plenty of fruit!« — подсказка какая-нибудь, наверно </msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 13:6:33">если что, нагуглился некий хаскельный фреймворк Fruit: Functional Reactive User Interface Toolkit</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 13:57:43">тогда будет совсем весело</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 13:57:57">[11:49:31] &amp;lt;swizard&amp;gt; получается, в 16:00 по Москве старт, а не в 15&lt;br />&lt;br />ну собственно да. москва же +4.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 13:58:52">у меня первый мелкий облом: я к началу контеста буду у клиента в офисе, и часа 3 голосом обсуждать задание не смогу. а вот где-то в 15-16 по UTC - смогу и войс</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 13:59:35">sectoid, а ты умеешь в эти все стрелки, трансформеры и тд? :) а то мне что-то тревожно</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 14:1:21">swizard: ни разу не пробовал, но очень много наслушался о них от друга-хаскеллиста. прорвемся.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 14:2:42">окай, поглядим</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:11:37">Действительно 16:00. Я тупанул что-то. :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:13:43">Да, FRP это один из последних модных трендов, можно было бы и догадаться.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:14:33">http://www.cliki.net/cells</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:14:44">Может, в деталях будет не то.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 14:19:40">есть подозрение, что там будет какая-то задача, не связанная с UI, но использующая все эти идеи сигналов / сигнал трансформеров </msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:20:36">Может, и не UI, а просто FRP.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 14:20:43">скорее просто frp</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:20:46">С UI сложновато организовать конкурс.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 14:21:2">кстати, не забудьте: ограничений на платформу/язык никаких нет</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 14:21:16">что наталкивает на мысль о токенах</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 14:21:24">скорборде и прочим</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 14:21:50">гадать осталось 1.5 часа всего)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:23:10">Я думаю, как обычно, будет публиковаться промежуточный результат, который будет запускаться у них на серваке. И да, скорборд следует ожидать, наверное.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 14:31:36">Functional Reactive Programming (FRP) integrates time flow and compositional events into functional programming. This provides an elegant way to express computation in domains such as interactive animations, robotics, computer vision, user interfaces, and simulation. &lt;br />А что, вполне, под этот FRP много интересных задач придумать можно.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:36:30">В общем, в эксельке всё сделаем. :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 14:36:43">:)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 14:38:2">jtootf будет кусать локти, что забил на контест)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:38:17">Это кто?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 14:38:47">http://jtootf.livejournal.com</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 14:39:18">а чего он забил на контест, кстати?</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:39:41">А он собирался что ли?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 14:39:58">Могу только предположить что им сейчас не до того, с учётом всего происходящего на Донбасе.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 14:40:19">а он разве не из Киева?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 14:40:38">Он сам в Киеве, у него родственники из Донбасаю</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:40:50">Ясно. Не до конкурсов.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 14:40:58">а, ну тогда понятно</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:47:49">Мне кажется, будут роботы.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:48:16">Как-то читал, реактивное программирование для управления роботами.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:48:33">Даже на русском что-то было. Товарищ где-то из этих мест плюс-минус.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 14:48:52">Слишком уж много роботов, уже раза 3 управление какими-то вундер-вафлями было. Скорее что-то из application, вроде computer vision.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:49:19">Ну, computer vision это тоже, в конечном счёте, роботы. :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:49:32">Ну было 3 раза управление вундервафлями, почему бы 4 раз не сделать?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 14:49:46">да погодите пока, ещё же не факт, что вообще будет frp :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 14:50:2">:) Поглядим через час.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:50:2">Надо ознакомиться, тем не менее. :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:50:11">Даже если не понадобится. :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:50:30">Давайте организационные вопросы решим.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:50:37">Голосом то будем что-нибудь обсуждать?</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:50:46">Или кнопки топтать будем?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 14:51:41">идеологически мне кнопки больше нравятся — от них остаётся лог, с которым могут ознакомится остальные, (отсутствовавшие например) члены команды </msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:51:45">В коммон лиспе есть что-нибудь, что делает delay?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 14:51:52">но если что, мой скайп swizard0</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:51:55">Мне кнопки тоже больше нравятся.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 14:52:4">я тоже за кнопки</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 14:52:37">«В коммон лиспе есть что-нибудь, что делает delay?» — sleep же</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:52:45">Не, не такой delay.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:52:50">Как в clojure.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:53:4">http://clojuredocs.org/clojure_core/1.2.0/clojure.core/delay</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:53:10">Мой скайп turtle_bazon</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:53:14">На всякий, так сказать.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 14:53:49">а, типа замыкание с мемоизацией результата вызова? штатно вроде нет, но макросом делается за минуту</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:54:21">Блин, не совсем. Мемоизация есть библиотекой.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:54:31">1. Мемоизация</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:54:39">2. Блокирование потока до появления результата.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 14:55:51">ну казалось бы, оборачиваешь в замыкание две переменные — результат и мьютекс :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 14:56:10">и за макросом всё это прячешь</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:56:25">Ну можно не хардкорно мьютексами, просто condition-wait и condition-notify</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:56:38">Да, делается недолго, интересовало есть ли готовое.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:57:2">Если городить frp, то удобно было бы через эту хрень забубенить, наверное.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:57:9">Хотя, если считать изменения результата.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:57:12">Да, тут думать надо.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 14:57:39">имхо готовое нецелесообразно вносить в стандартную библиотеку в том плане, потому что вычисления в cl не чистые, поэтому нахаляву их мемоизировать нельзя</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 14:58:14">а в кложуре, насколько я знаю, там есть разделение в этих местах на чистые/нечистые</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 14:58:29">хотя могу ошибаться</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:58:42">Ну... Сильно такого разделения нет. Во всяком случае, компилятор у тебя не контролирует.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:58:49">Хотя, в целом, по идеологии, там всё чистое.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:58:52">Как в хаскеле. :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 14:59:10">И есть мутирующие переменные я-ля STM. Хотя, STM и есть.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:3:36">С оргами на ирке кто будет висеть?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 15:4:21">Не долго законнектится если понадобится, всё равно аннаунсы/багфиксы они будут на сайт выкладывать.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:7:0">http://bodil.org/hipster/m/lambda-man.jpg</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:7:11">Чувака знаете? В твиттере орги ссыль кинули.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 15:9:42">Professor Philip Wadler</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:9:54">Что-то знакомое.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:10:19">Чот тормознул, надо было в гугле картинку поискать. :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 15:11:9">Орги активно пропагандируют свою кухню, я так понимаю крупный тип в их комунити.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:12:25">Да, весомая фигура.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 15:22:34">А на битбакете можно как-то ключ добавить, чтобы пароль каждый раз не вводить?</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:24:19">Можно.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 15:24:37">Отдельно для репы icfp?</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:25:15">Вот это точно не скажу. Но репу icfpc когда я создавал, у меня уже был привязан ключ. И в репу меня с ключом пустило.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 15:25:53">Я сейчас добавил ключ, но icfp всё равно пароль требует, ну и ладно, не страшно.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:26:7">В твиттере мессага, что 3072 секунды осталось.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:26:33">Что за число - хз.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:27:49">https://bitbucket.org/account/user/turtle_bazon/ssh-keys/</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:27:53">Тут добавлял ключи?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 15:28:11">Да, конечно, для своего акка</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 15:28:34">Думаю дело в том, что icfp твоя репа, потому тебя туда пускает по умолчанию, а с меня пароль требует.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:28:47">swizard, вроде, тоже с ключом.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:28:56">Это не совсем моя репа, это репа команды.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:28:58">team.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 15:29:19">Хмм, сейчас ещё поковыряю, пока время есть.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:29:46">Можешь мне скопировать, я попробую добавить в SSH keys в тиме.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 15:30:20">скинул в окне чата</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 15:30:53">мне с ключом разрешают писать в репу</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:31:27">Попробуй перезабери репу.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 15:31:39">one moment</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 15:32:39">Во</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 15:32:49">Пересоздал репу на локальном диске, всё ок теперь</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:32:54">Ну отлично тогда.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:33:6">Надо бы им этот глюк записать куда-нибудь. :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:33:29">Есть мысли по поводу 3072?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 15:33:54">Это случайно выбранный момент времени мне кажется. :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:34:24">https://github.com/icfpcontest2014/icfpcontest2014.github.io</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:34:26">Не знаю.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:42:7">Пнгшку первую, которая bk.png уровнями обработал, там рисунок проглядывается.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:42:11">Вряд ли случайный.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 15:43:32">что-то конкретное?</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:44:22">Ничего конкретного. :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:44:55">http://imgur.com/b9krthc</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:44:59">Хрень какая-то. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 15:45:12">если к этой картинке чёрные квадраты по углам добавить, не получится ли в результате qr-код? :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:45:28">ХЗ. :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:45:35">Надо попробовать.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:45:55">Мне пока не на чём. :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:47:7">Кто-нибудь просканируйте.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:47:52">На втором - кошка гитхабовская.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 15:48:30">я доехаль</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 15:48:40">что за png'шка?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 15:49:4">За 10-15 минут не успею, там надо код версии добавлять + код маски и уровня коррекции, хз какие они там должны быть</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:50:17">https://github.com/icfpcontest2014/icfpcontest2014.github.io</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:50:19">Отсюда.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 15:51:13">угу, уже листаю</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 15:55:54">меньше 5 минут</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:57:33">Не успел почитать про FRP для роботов. :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 15:57:54">успеешь еще)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 15:58:7">из их свиттера:&lt;br />%    =     \...o.....</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:58:9">За три дня то? :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:58:15">Да, я не понял.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 15:58:20">интересно, это что-то значит или нет?)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:58:29">Думаю, значит.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 15:58:57">Эти хаскеллисты хуже поэтов символистов, чесс слово</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:59:12">3072 это же круглое число.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:59:18">0xC00</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 15:59:36">На низком старте. :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 15:59:51">или 2 единички в старших разрядах в двоичной</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 16:0:18">обратный таймер покраснел</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:0:29">На странице ничего не поменялось.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 16:0:29">в минус ушёл :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 16:0:50">есть</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 16:0:53">поехали!</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 16:1:1">лямбда-мэн</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 16:1:4">ояебу</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:1:44">Эх, сразу видна ленивость хаскеля. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 16:2:1">похоже как мы в 2012 лямбды в пещерах собирали</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:2:8">Я ещё не читал.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:2:22">О, микроконтроллер.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:3:53">Дуэли.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 16:5:33">/me ушел в чтение</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:6:8">Да, пока читаем.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:8:31">ЭТо же этот, как его блин.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:8:35">Вспомнил, пакман.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 16:8:40">угу</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 16:8:50">только с AI для пакмана</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:9:28">А вот и понятно что за твит обозначал. :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:11:35">Да, похоже на пещерки.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:11:44">И, похоже, тоже придётся имплементить a*</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 16:12:17">мы его уже имплементили, у меня код сохранился :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:13:5">У меня тоже. Но он, вроде, глючил. :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 16:15:35">Получается идеальная стратегия, сожрать все пилюли, как можно больше привидений, фруктов и закончить уровень, чтобы получить множитель. pathfinding much?</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:17:22">Надо бы ещё к фруктам подойти к моменту появления. Планирование.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 16:17:23">да, там ещё в заданное количество тиков надо уложиться</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:18:0">По истечению тиков жизн уменьшается?</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:25:32">GHost CPU (GHC)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:25:36">Позабавило. :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 16:25:43">Так, получается ещё интерпретатор псевдо ассемблера + CPU emulator</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 16:25:46">лол, чтоб получить карту, надо реверс-инжинирить дамп памяти микроконтроллера</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 16:25:57">не просто интерпретатор :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:26:12">Я ещё не дочитал до туда.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 16:26:13">ну да</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 16:35:37">пакман это, да</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:36:19">Навороченный какой-то пакман. Пока не дочитал куда эти программы совать и т.д.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 16:36:27">спека большая</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 16:36:30">я еще читаю</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 16:36:32">но пока нравится</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 16:36:51">не особо нравится только что опять ботов писать( но CPU и реверс-часть очень нравится</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:36:55">Ну относительно несложная и относительно масштабная.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 16:37:13">походу там про ботов процентов 10 сложности всей задачи</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 16:37:19">Она алгоритмически вроде несложная, а вот объём большой получается</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 16:37:32">вы ещё до реверс-инжиниринга лисп-машины по ассемблеру не дочитали, наверно :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:37:47">Я ещё нет. :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:37:59">Но что-то уже такое началось.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 16:38:45">блин я пока не представляю как люди собираются соло участвовать в этом icfpc</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 16:38:53">там работы реально на неделю</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 16:38:57">угу</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:39:0">В этом да.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:44:2">Я уже читать устал. :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 16:44:18">The environment is more complex than the two stack structures. Rather than a contiguous stack, it consists of a chain of environment frames. :/</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 16:44:41">ыыыы</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:51:48">Придётся компилятор что ли писать?</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:52:7">Дочитал. Голова вспухла слегонца. :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 16:53:9">У меня пока местами каша, перечитываю мутные моменты</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:53:33">Что-то я там скорборда не увидел.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:53:35">И проверки.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:53:43">Т.е. придётся почти вслепую, если правильно понял.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 16:55:12">From this it follows that each invocation of the AI before a move was allowed to run up to 3072 * 10^3 instructions.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 16:55:17">вот оно и 3072</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:56:17">Да.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:56:48">http://icfpcontest.org/reference.html</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:56:52">А вот, заработало.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 16:57:12">Ну хоть не в слепую. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:0:57">давайте попробуем подытожить, что нам удалось понять из задания, хотя бы в самом общем</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 17:1:10">Касательно AI, я так понял что это функция(шаг стейт машины), которой приходит состояние мира, он высчитывает из этого новое состояние, возвращает и так по кругу?</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:1:39">Что я понял, надо нам засабмитить программу для лямбдамена.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:1:51">правильно ли я понял, что пока (lightning round) решением является листинг кода для лисп-машины (GCC), который управляет пакманом?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:2:1">а для гоустов писать программки пока не надо?</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:2:19">Да я вот не понимаю, для готов вообще нужно будет?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:2:19">grepz: да, я это тоже дак понял</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:2:28">аааа.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:2:41">Ну да. Лайтнинг от нелайтнинга отличается только тем, что дуэли не будет.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:2:48">Соответственно да.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:2:55">Ещё раз почитаю.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:3:12">For the lightning round it is your Lambda-Man versus ghosts supplied by the judges and in mazes supplied by the judges.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:3:19">Собственно.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 17:3:22">госты будут предоставлены судьями, а наша реализация должна касаться только l-man'а</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:3:49">итого, ghc сегодня можно вообще не трогать, правильно?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:3:54">только gcc?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 17:3:55">получается так</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 17:4:47">Надо теперь как-то gcc на задачи побить.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:5:10">следовательно, дотстаточно будет написать АИ на обычном лиспе, транслятор в промежуточный лисп (по спеке), и компилятор промежуточного лиспа в асм gcc?</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:5:43">Про фулл раунд ещё толком ничего не сказано, говорят, опубликуют позже. А пока да, получается, нужно только gcc.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:6:8">Ну типа того, в целом, да.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:7:20">Нам бы ещё надо спеку сделать для промежуточного лиспа. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:8:40">ну вот как-то так: All program data structures have to be represented using combinations of pairs and integers (and sometimes closures).</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:10:49">Я так понял, GC они как-то сами реализуют? Нам трогать его не надо?</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:13:24">А что, память для них общая? Только регистры указывают на участки разных стеков?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 17:14:20">насколько я понял инструкции определяют с какой памятью работать</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 17:15:8">Three of the registers point into special data structures in memory:&lt;br />&lt;br />    Data stack&lt;br />    Control stack&lt;br />    Environment frame chain&lt;br />&lt;br />The remainder of the memory is dedicated to the data heap.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:15:14">Так общая или нет? Похоже, общая.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:15:21">А участки стека как-то лимитированы?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 17:16:14">да, получается адреса логически разделены, про лимиты ищу</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 17:18:51">про RAM вижу ограничение: 10 million CONS cells to be used by the Lambda-Man AI in the heap.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 17:19:38">какие вы шустрые. </msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:20:11">Так то heap.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:21:5">ща я минут через 5 закоммичу intermediate-desc.lisp, где попробую подытожить всё, что я понял про спеку встроенного лиспа</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 17:22:59">predefined ghost'ов тоже кудысь закоммитить бы</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:23:49">А предефинед гхосты уже есть?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 17:24:2">есть примеры из доки</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:24:12">А, ну понятно.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 17:24:20">miner.ghc, flipper.ghc, fickle.ghc</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 17:24:34">я еще вкуриваю лиспоспеку</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:24:47">Да, спека та ещё.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 17:25:2">turtle': а чего тебя 2 ? :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:25:26">Один неактивный же. :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:26:47">А, тегами он проверяет, чтобы нельзя было сложить бананы с обезьянами.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:26:53">Точнее, консы с интами.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:31:4">Инты 64 битные.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:31:12">32.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:31:15">Извиняюсь.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:31:17">4-байтные.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:31:22">Т.е. 32битные.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:31:32">+ там теговые биты, но нам на это пофиг.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:32:11">Причём 32 бита это не только на положительные, но и на отрицательные.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 17:32:51">теговые биты входят в эти 32 или нет?</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:33:6">Нет.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:33:20">Конкретно мы про эти теговые биты вообщ не знаем.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:33:24">Как пользователи.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:33:40">Т.е. на самом деле они более 32 битов, но оперировать мы можем 32-битными числами.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 17:34:35">ага, нашел уже)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:37:42">пытаюсь спеку запротоколировать на лисп: https://bitbucket.org/skobochka/icfpc-2014/src/7960b1f1bd9af74ca26290b82865d82ec4bb5ad2/internal-lisp-desc.lisp?at=master</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 17:37:54">Правильно ли я понимаю, что если мы сделаем LDC 10, LDC 20, у нас в дата стэке будет одно за другим два значения: 20, 10. И если потом сделаем CONS, то мы создадим cons ячейку (20 . 10) и передадим указатель на эту ячейку в data stack reg?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 17:39:18">если передадим == push, то да, именно так</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:40:3">Зачем пуш? CONS уже пропушит.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:40:10">http://icfpcontest.org/lman.html</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 17:40:50">ну я об этом и говорю</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:41:15">А, ну ладно.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 17:43:11">conditional call (sel) -- это прекрасно</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:43:14">swizard: ну как-то так, наверное, начинается.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 17:45:34">lambdaman-vitality это числовое значение, 0 - нет fright mode, N - столько то тиков осталось?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:46:9">да</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:46:34">тиков power-pill</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 17:46:39">ага</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:48:1">так, но это я типы там перечислил, теперь надо понять, какой там синтаксис разрешён</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:48:18">я понял пока только про целые числа, cons, и lambda для замыканий</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:48:27">Ну да.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:48:33">нужен, как минимум ведь, if</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:48:37">Вроде больше ничего нет.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:48:46">Для ифов инструкции есть.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:48:53">conditional branch.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 17:48:58">да, исполнение инструкциями</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:49:37">просто я хочу зафиксировать синтаксис intermediate lisp, чтобы можно было из него начать компилятор в gcc ваять</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 17:50:26">иф есть, он sel зовется. только как я понял работает как call</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 17:51:52">отойду на 5 мин</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 17:52:0">а, трушный if зовется TSEL</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:52:10">это типа инструкции уже </msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:52:49">я просто хочу определиться с ast на sexp, чтобы можно было компилятор через какой-нибудь паттерн-матчинг (cl-match) транслировать в асм</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:53:33">можно на самом деле ввести команды list и tuple, чтобы не морочится с консами</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:53:51">Можно, да.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:53:58">Консы как-то геморно выглядят.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:54:7">типа (tuple ghost-vitality location direction) вместо (cons ghost-vitality (cons location (cons direction 0)))</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:54:23">Ага.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:54:30">Идиоматичнее, наверное, list. :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:54:36">Но это неважно.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:54:55">а там есть list уже, как (cons … (cons … (cons … 0 )))</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:55:8">типа tuple, с последним элементом 0</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:55:31">ими карта кодируется, кстати</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:55:44">Что-т не заметил. Но логично, да.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 17:56:34">хотя не знаю, может, и не нужно, лучше напрямую консы использовать, это же промежуточный лисп — из него надо будет как асм порождать, так и обратно считывать (в стейтах, например)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:57:7">В принципе, можно пока без изысков.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 17:57:13">А удобства потом добавить.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:1:50">А что, карта только ботам доступна?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:2:15">нет, она в world-state есть</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:3:2">Давайте может зафиксируем что и в каком виде мы должны заимплементить на lightning round</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:4:17">А этим стейтом кто его инициализирует?</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:5:12">Вижу.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:5:29">давайте зафиксируем</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:6:8">есть минимальные вещи, без которых решение бессмысленно: это intermediate lisp и его компилятор в gcc</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:6:31">AI тут даже сам по себе не так нужен, можно простейшую логику какую-то написать сразу на intermediate lisp</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:6:43">чтобы хоть как-то работало в lightning round</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:6:59">Ну, логику можно и руками написать.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:7:8">Тут смысл, думаю, как раз в интермедиейт лиспе.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:7:16">ага, я это и имел в виду</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:7:17">Чтобы можно было перепробовать несколько вариантов.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:8:37">все, довкуривал наконец(</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:8:47">следовательно, 1. нам нужно придумать синтаксис intermediate lisp, </msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:9:1">2. спрограммировать простейший транслятор</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:9:17">3. спрограммировать простейший AI</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:9:44">боюсь, что все фишки gcc мы заимплементить не успеем (вроде tail call extension), но хоть что-то можно изобразить</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:9:58">если разделится, то может и успеем</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:10:27">я готов поиграться с транслятором. подозреваю что там все не так просто (оптимизации будут решать)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:10:59">окей, давайте тогда сейчас прикинем черновой вариант синтаксиса, вроде это должно быть быстро</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:11:3">предлагаю начать с конца :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:11:24">в разделе examples есть local.gcc и goto.gcc</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:11:29">ага</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:11:40">давайте прикинем, как должна выглядеть программа на intermediate lisp для них</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:12:35">константы это только int?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:12:39">вроде да</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:12:45">да, только int</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:12:56">собсно тут вообще ничего кроме cons, int и closure не бывает</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:13:8">по-моему, программа должна быть что-то вроде: (let ((x 21)) (+ x x))</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:13:12">свиз, ты хочешь писать AI сразу на intermediate lisp?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:13:30">поначалу да, что-нибудь совсем простое</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:13:31">Ну давайте прикидывать как будет выглядеть интерлисп.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:13:36">никаму не кажется что минимальный scheme как раз оно?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:13:39">никому*</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:13:50">Нам надо ещё минимальнее, наверное. :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:14:7">let, lambda, if, call?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:14:8">что еще?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:14:16">арифметика</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:14:25">вот я и предлагаю прикинуть, по екзамплам</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:14:26">cons, car/cdr</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:14:42">проверьте, плз, правильно ли я понял, что local.gcc — это (let ((x 21)) (+ x x))</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:14:44">Арифметика нужна будет с вмещение до 32 бит.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:15:6">я пойду выкурю сигарету и придумаю лисп-аналоги для примеров</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:17:21">да, вроде всё так судя по спекам</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:18:22">не совсем походу, метка body откуда-то должна взяться</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:18:27">правда может проще (define x 21) (define (func x) (+ x x))  </msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:18:35">Ну по симулятору совпадает.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:18:44">Метка это просто метка.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:18:47">собственно потом (call func x) или что-то в этом роде</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:18:56">Туда у нас (+ x x) - это и есть body.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:19:6">сложнее транслировать имхо</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:19:18">когда явно указываешь будет проще</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:19:53">тогда вообще ((define (body x)&lt;br />     (+ x x))&lt;br /> 21)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:20:12">Ну если смотреть с позиции стековой машины.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:20:16">Как бы да.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:20:16">давайте сюда сразу тогда https://bitbucket.org/skobochka/icfpc-2014/src/7659ff72facc179a514971b3dfc5c3f656e39a71/gcc/examples/?at=master</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:20:20">вот, что-то в этом роде как-раз</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:21:2">ИМХО, первый вариант был удачнее.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:21:17">Получается, после летов мы делаем енвайронмент и далее продолжаем.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:21:32">let — это синтаксический сахар для lambda :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:21:33">Т.е. леты - это LDC, потом LDF на внутрь.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:21:46">Ну так то да.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:21:52">Можно и так, конечно.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:21:57">потом можно будет макросом навернуть</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:22:0">угу</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:22:1">если нужно будет</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:22:3">Т.е. так и есть.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:22:46">давайте goto.lisp напишем?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:23:28">dum это же local scope фактически?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:23:45">define == lambda?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:23:54">а, он именованый</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:23:55">ыыы</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:24:4">dum — похоже</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:24:19">бтв, turtle, а у тебя на сервере лог конфы сохраняется?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:24:27">похоже, ichat лог обрезает :(</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:24:51">у меня есть лог с&lt;br />&lt;br />[14:31:39] &amp;lt;grepz&amp;gt; one moment</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:25:4">Не уверен. Точнее, не знаю что он там делает.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:25:11">НО у меня на компе сохраняется.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:25:27">понятно, ладно, попозже тогда в psi переползу</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:25:51">так, а RAP как транслировать, есть идеи?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:26:38">могу лог сбросить в реп если надо</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:26:46">у меня непонятки с AP - call function&lt;br /></msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:27:18">если я правильно понял, rap загружает в стек адреса глобальных функций для перехода</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:27:21">или нет?</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:27:29">AP просто берёт адрес и вызывает, сдампив с датастека в енвайронмент.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:28:10">turtle': а что там означает вот этот пункт:&lt;br />set the frame's parent to be the environment frame pointer&lt;br />            from the CLOSURE cell;&lt;br /></msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:28:38">я забыл английский, или он намекает что в CLOSURE cell есть environment frame pointer?</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:28:46">Ну да.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:29:7">В local.gcc, собственно, перед AP делается LDF.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:29:12">угу</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:29:14">/me пошел перечитывать спеку</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:29:21">LDF создаёт клозуру с адресом и текущим енвайронментом.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:29:30">все, понял</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:30:19">аа, то есть RAP зацикливает вызов в части cell'а?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:30:47">goto.lisp — https://bitbucket.org/skobochka/icfpc-2014/src/bb2cdb8d87511175ec7dfc0df68d2fc90e292326/gcc/examples/goto.lisp?at=master как-то так?</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:32:43">Вроде похоже.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:34:25">а как понять что здесь нужно делать dum?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:34:54">видимо, по тому, что здесь 2 top-level функции</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:35:33">ага, начинает доходить</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:35:39">  DUM  2        ; 2 top-level declarations&lt;br /></msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:35:43">там так и написано</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:36:9">логично в принципе</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:36:20">но вообще вопрос правильный, видимо, лучше тогда так делать: https://bitbucket.org/skobochka/icfpc-2014/src/af9167d7f4fdc12c372c86b3cbaf1b2d842d08ae/gcc/examples/goto.lisp?at=master</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:36:47">ага-ага</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:36:52">только main нужно вызвать</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:37:15">таким образом в первом примере мы скоуп не создаём, во втором создаём</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:38:13">мне кажется, нужно всегда создавать scope</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:38:20">чтобы код унифицировать</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:38:44">можно разворачивать наверх, но ты прав, это усложнит</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:39:12">правда тогда первый пример 1 к 1 не транслируется в gcc</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:39:30">Почему?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:39:40">потому что scope создаётся</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:39:44">Вроде бы же как раз создаётся отдельный скоуп.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:39:50">Так надо же создавать.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:40:3">в их примере создания нету</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:40:17">А LDF?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:40:35">я думаю, top-level scope можно будет отдельным проходом убирать просто</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:40:37">Хотя, как рассматривать, да.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:40:38">это просто дефайн функции</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:40:49">это просто уже оптимизации</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:40:51">да, пожалуй</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:40:52">Ну в LDF скоуп текущий идёт.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:40:58">Да, наверное, не создаётся.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:41:20">ну вобщем да, топлевел просто режется</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:42:2">сча, там где-то было про требования пустого скопа</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:42:3">момент</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:42:9">итого, правильно ли я понял, что мы решили: 1. всегда делаем корень из define; 2. все внутренние define считаются и оборачиваются в dum/rap; 3. и так рекурсивно</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:42:23">получается так</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:42:28">во</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:42:31">у RAP'а</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:42:39">Synopsis: pop a pointer to a CLOSURE cell off the data stack;&lt;br />          the current environment frame pointer must point to an empty&lt;br />            frame of size $n;&lt;br /></msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:43:1">а этот empty frame разве не через dum создаётся?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:43:24">как раз через него. просто пояснение почему его нет в 1 примере </msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:43:25">он как раз через dum и должен быть реализован</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:43:59">в 1 примере, насколько мы поняли, там top-level scope просто режется</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:44:4">за ненадобностью</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:44:15">Получается, так.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:44:22">Если создадим, ничего страшного не будет.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:44:31">Хотя, это опять смотреть надо. :)</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:44:42">Может, насоздаёт он там их, что не влезем в какие-то рамки.</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:44:59">Пока предлагаю оптимизациями не заниматься.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:45:31">давайте я пока в icfpc-2014/gcc попробую создать рыбу для компилятора</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:45:39">если нет возражений</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:45:57">Просто для себя ещё кое-что уложить по полочкам, как орги проверять будут предоставленные решения? Я эту часть как-то пропустил. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:46:23">если я правильно понял, орги будут запускать код в имеющемся у них эмуляторе</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:46:30">может я слоупок, но пока не вкуриваю отличия RAP от AP. </msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:46:39">возражений пока нет</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:46:45">rap — это recursive ap :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:47:0">rap просто опять на стек адрес вызова пихает как я понимаю</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:47:12">ну типа flet и labels </msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:47:15">вобщем да, вроде пока логично получается</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:47:49">swizard: я видел название. в семантику вникаю</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:48:21">аааааааа</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:48:24">все, вкурил)))</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:48:58">Меня сейчас больше беспокоит TRAP - recursive environment tail-call function</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:49:5">но мы пока можем на него и забить</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:49:59">дык там все просто</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:50:10">такой себе goto с общим стартовым скопом</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:50:27">собсно все tail call extensions - возможность делать эффективные циклы</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:51:24">интересно, почему Pascal extensions таки Pascal? потому, что империативное деструктивное присваивание?</msg>
 <msg nick="turtle'" in="1" from="icfpc-2014@conference.bazon.ru/turtle'" time="25 18:52:58">ТАк, я пока передислоцируюсь.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:55:36">спеку обновили</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 18:56:12">хуже стало :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:56:21">еще не видел diff</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 18:56:40">ахха: https://github.com/icfpcontest2014/icfpcontest2014.github.io/commits/source</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:57:22">Clarify that there may be up to 256 ghosts (maximum).&lt;br /></msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:57:23">jvu</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 18:57:25">omg</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 19:1:11">я, наверное, передислоцируюсь домой. и ворвусь дальше</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 19:1:22">я пока почитаю про cl-match</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 19:1:53">dl-match походу не нужен, мы только s-выражения матчим, имхо достаточно if-match из набора metatilities</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 19:2:4">ок</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 19:2:50">наверно, вот как-то так можно будет попробовать: Задача про ip-диапазоны: cуперкомпиляция условий &amp;lt;http://swizard.livejournal.com/177506.html&amp;gt;</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 19:4:17">читаю</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 19:4:48">если что, я не настаиваю на этом методе, просто первое, что пришло в голову</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 19:5:8">полистаю на базе у себя</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 19:5:46">ребят, как вы думаете: а зачем нам расписали подноготную микроконтроллеров управляющих гостами?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 19:6:13">думаю, что после lightning round нам нужно будет писать АИ для них :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 19:6:29">т.е. добавят инструкцию для прошивания мозгов и гостам?)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 19:6:34">да, я думаю они следующие на очереди</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 19:6:47">будет весело</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 19:7:0">все, я покатился. надеюсь не убьюсь на радостях)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 19:7:7">:)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 19:7:9">аккуратней =)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 19:7:24">пятница, пробки( надеюсь стида не закипит</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 19:9:45">вкуриваю, логично подход выглядит</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 19:31:26">а посмотрите плз https://bitbucket.org/skobochka/icfpc-2014/src/a6fbfc2f1d1a68ef79eb949fc8499e01d154b0e9/gcc/compiler.lisp?at=master</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 19:31:45">это скелет пока, идея там такая: </msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 19:32:3">GCC&amp;gt; (translate '(define (body x) 1))&lt;br />((:LABEL BODY) ((:LDC 1)) (:RTN))&lt;br /></msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 19:32:46">смотрю</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 19:33:37">там со стейтами надо переделать, конечно, он нужен рекурсивный для определения AP/RAP</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 19:33:52">ну в любом случае это пока набросок</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 19:42:59">идея вроде понятна, тут ещё cons нужен, тогда можно будет формы раскрывать</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 19:43:22">да, правильно</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 19:43:52">я пока щас пытаюсь изобразить environment, чтобы правильно генерировать LD</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 19:45:16">ок, я пока освоюсь, попробую поэксперементировать со спекой</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 19:45:47">а я правильно понимаю, что «LD 0 0» загружает первую переменную из текущего списка биндингов функции, а «LD 1 0» — из биндингов уровня выше?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 19:46:21">да</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 19:46:36">похоже параметры передаются через environment</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 19:46:42">ага</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 19:46:56">еще интересный момент: у нас есть еще один undocumented параметр AI'шке</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 19:47:12">он там явно не просто так</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 19:47:23">ок, тогда если мы встречаем атом X, и это не интежер, то мы смотрим в локальный фрейм, если он там есть, то LD 0 0, а если нет, смотрим выше, и тд</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 19:47:50">ща попробую что-нибудь придумать в этом месте</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 19:56:7">label - как я понял нам надо самим будет расчитывать смещения?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 19:59:36">наверно да</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 19:59:51">судя по спеке - да</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:0:21">я там попробовал имплементировать environment и сложение, получается как-то так:</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:0:38">GCC&amp;gt; (translate '(define (body x) (+ x 1)))&lt;br />((:LABEL BODY) (:LD 0 0) (:LDC 1) (:ADD) (:RTN))&lt;br /></msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:0:53">GCC&amp;gt; (translate '(define (f x) (define (g y) (+ x y))))&lt;br />((:LABEL F) (:LABEL G) (:LD 1 0) (:LD 0 0) (:ADD) (:RTN) (:RTN))&lt;br /></msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:0:58">Смещение там простое. Тупо по команде.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:1:34">угу</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:2:28">С енвайронментами я не до конца вкурил.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:2:44">Там берут текущий, по нему находят корневой и уже из него тащат значения.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:3:20">там идея такая: окружение — это список фреймов, фрейм — это список биндингов </msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:3:47">соответственно, ищем сначала биндинг в текущем фрейме, если его нет, двигаемся дальше к родительскому</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:4:8">каждый define создаёт свой фрейм с биндингами</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:4:44">Ну я также идею понял. Но по спеке как-то странно.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:4:54">Там же не ищется биндинг во фрейме.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:4:58">Там тупо из корневого тащится.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:5:21">Глаза вытекают от новой спеки.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:5:33">я по псевдокоду писал:</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:5:41">  $fp := %e&lt;br />  while $n &amp;gt; 0 do            ; follow chain of frames to get n'th frame&lt;br />  begin&lt;br />    $fp := FRAME_PARENT($fp)&lt;br />    $n := $n-1&lt;br />  end&lt;br />  $v := FRAME_VALUE($fp, $i) ; i'th element of frame&lt;br />  %s := PUSH($v,%s)          ; push onto the data stack&lt;br />  %c := %c+1&lt;br />N</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:5:47">блин :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:5:53">ну суть там та же </msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:6:26">Это что за операция?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:6:33">LD, просто сам LD тащит из конкретного фрейма конкретное значение</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:6:41">а мне его как раз сгенерировать надо</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:6:58">тоесть мне надо найти из какого фрейма надо взять какое по счёту значение</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:7:2">А, в такой раскраске не признал. :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:7:30">Ну суть втом, что пока фрейм не совсем парентовый, выбирается фрейм парентовый. Итого корневой. А уже из него берутся значения.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:8:12">А нет, туплю, кажись.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:8:32">ну вот как-то так, если упрощённо: </msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:8:32">Да. Туплю. Он просто же по цепочке берёт.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:8:36">GCC&amp;gt; (translate '(define (f x) x))&lt;br />((:LABEL F) (:LD 0 0) (:RTN))</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:9:11">(f x) создаёт нулевой фрейм, записывает туда факт, что x забиндена</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:9:33">и когда я рекурсивно транслирую запись «x», я её должен поискать во фреймах снизу вверх</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:9:41">Так не получится.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:9:42">чтобы циферки в LD правильно расставить</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:9:45">почему?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:9:55">Тебе надо фрейм создать.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:10:15">Хотя, его выше уровнем должны создать.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:11:26">Да, нормально должно быть.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:13:8">короче, надо щас подумать как с функциями быть</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:13:38">Ага. Тут то получается, глобального скоупа нет.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:14:36">нужен, видимо, какой-то отдельный энвайрмент для символов функций</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:14:40">Фреймы вложенные. По идее, можно смотреть и сохранять какие переменные к какому фрейму идут.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:14:47">ну, если есть top-level формы (кроме main) - тогда творить енвайрмент верхнего уровня</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:14:56">И далее уже подставлять из известного.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:15:21">У нас нет энвайронмента верхнего уровня.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:16:0">допустим, вот такая форма: (define (f g) (g 1))</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:16:20">Все енвайронменты создаются перед вызовом.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:16:26">по-идее, если в верхнем фрейме есть такой биндинг, можно его смело вызывать</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:16:33">а если нет?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:16:39">как в примере с go/to</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:16:47">Ну да. А если нет, то на этапе компиляции нужно с этим определиться есть или нет.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:16:57">в примере go/to у нас такой себе labels, как ты уже говорил</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:17:15">правильно, но я не понимаю пока, как его реализовать :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:17:26">Ааа. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:17:49">может, ну его вообще :)) делать рекурсию будем по-старинке, через fixed-point operator? :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:18:8">Ну вот у тебя frame что содержит?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:18:25">просто список символов — переменных</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:18:26">не, ну его</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:18:30">у нас лимиты</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:18:37">и компилировать надо макс. эффективно</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:18:41">допустим, добавить туда proc-name, и будет биндинг для функции</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 20:19:0">лимиты довольно свободные, по крайней мере по памяти</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:19:16">По gcc лимиты большие.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:19:30">Нам бы для начала скомпилировать чтобы работало. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:19:45">а как labels сделать непонятно — надо перед трансляцией сначала видимо прогнать «на черновую» все под-формы у define и собрать в отдельное место все метки функций внутри</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:19:55">а по коду лимиты есть?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:19:57">и это отдельное место уже передавать дальше</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:19:57">/me пошел рыть</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 20:20:13">да, первый прогон, собирать инфу, а потом уже транслировать</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:20:18">Ну у нас на самом деле ограниченное количество того, что будет создавать новые фреймы.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:20:42">И в этих местах у нас есть список переменных, которые они в фрейме держат.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:21:9">По коду лимитов нет.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:21:15">вообще нет лимитов?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:21:15">Не помню, во всяком случае.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:21:19">по коду</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:21:28">По коду gcc?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:21:32">да</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:21:38">ладно, давайте тогда я попробую сейчас что-то изобразить с функциями-labels, а пока можно параллельно закодировать остальные инструкции, если кто желает :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:21:53">всякое сравнение и тд, по образцу арифметических операций</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:22:0">Там написано, что охренненное количество памяти. Один кусок - стек по коду, другой - стек по данным, третий - управляющий, остальное хип.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:22:13">тока надо отбранчеваться нам видимо, и потом помержиться </msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:22:30">наверное надо подумать кто чем будет заниматься?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 20:23:28">я уже вроде разобрался как с этим работать, могу всякие операции поимплементить</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:23:29">из независимых задач у нас ещё написание примитивного AI на intermediate lisp и транслятор асма порождённого после gcc::translate</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 20:23:31">их там не так много</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:23:43">grepz: окей, давай</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:23:45">и еще поковырять скрытый параметр</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:23:55">я ничерта не понимаю в AI</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 20:24:0">тогда создаю бранч и начинаю</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:24:19">я тоже отбранчуюсь</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:25:0">Мы с sectoid пока курим спеку. :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 20:25:12">AI пока можно даже без всяких замут вроде пасфиндинга делать</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:25:12">Давай вопросами и мыслями меняться пока они пишут.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 20:25:15">просто обход</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:27:11">мне не дают покоя пока 2 момента:&lt;br />1. недокументированый параметр у main в gcc&lt;br />2. appendix 3-11 который описывает взаимодействие cpu/co-processor и который якобы отстутвует</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:28:12">Ну... :) Пока тоже не могу сказать ничего по этому вопросу.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:28:15">а, еще есть 3. покрыть транслятор(ы) тестами (очень пригодится при написании оптимизаций)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:28:32">еще есть 4. (но это на основное время) трансляторы для ghc</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:28:50">ghc там регистровая машина, конечно.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:29:10">Но тоже, в целом, норм. И да, вопрос - транслятор это будет или интерпретатор?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:29:25">а вот кто его знает</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:29:43">но судя по всему - будет возможность как-то &amp;quot;промывать мозги&amp;quot; призракам</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:29:55">Нам бы ещё читалку данных.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:30:6">которых?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:30:27">Которые на вход бота подаются. Кстати, в каком виде то?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:31:30">в спеке есть же</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:32:5">а, еще задачка: &lt;br />1. написать на IL (intemediate lisp) какие-то типично-полезные функции для работы со стейтом мира</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:32:56">Ну я спеку тогда недопонял, наверное. :) Как всё это передаётся боту?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:33:19">Обычными консами?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:34:8">да</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:34:22">А cons у нас будет куда-то в кучу смотреть?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:34:28">раздел:&lt;br />Lambda-Man AI interface</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:34:43">прилетает стейт мира</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:34:43">Да, его и смотрю.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:34:55">который есть тупль (цепь консов)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:35:0">с кучей инфы</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:35:27">я в файлике internal-lisp-desc.lisp эти типы суммировал</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:35:31">ага</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:35:32">для них можно написать аксессоры</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:35:35">на ILisp</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:35:40">Угу.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:35:48">чтобы использовать их в :&lt;br />1. AI&lt;br />2. тестах для транслятора</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:38:7">закинул рулесы в виде текста в реп</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:38:19">периодически буду обновлять - так будет хорошо видны изменения</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:38:22">lynx -dump 'http://icfpcontest.org/specification.html' &amp;gt; RULES</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:39:42">&amp;quot;&lt;br />The encoding of the AI state is private. The host should pass the current&lt;br />AI state on each step but not otherwise inspect it.&amp;quot;</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:39:48">Прикольно, а если поинспектить?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:40:1">Есть же трасировка, вроде бы.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:40:53">да не, это же наш ai state :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:41:0">хост — это эмулятор оргов</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:41:21">они просто будут получать то, что мы им дадим, и без изменений возвращать обратно</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:41:25">Так я и говорю, поинспектить оргов. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:41:49">но это же просто форма, а не код</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:41:58">Ну да.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:42:25">я вот инспектю</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 20:46:5">пока не очень понимаю как кондишены делать, там же абсолютные адреса, так?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:48:14">Да.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:48:20">Просто прыгать по ним.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:48:36">Хотя, смотря как делать.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:48:46">может, сделать не по адресу прыжок, а по метке?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:48:56">Если внутри ветки ифа будет скоуп, то можно и не так.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 20:48:57">а потом уже в процессе окончательной генерации кода пересчитать метки </msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:49:1">Ну нам нужно по метке.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:49:9">Просто нужно адрес метки будет вычислять.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 20:49:12">вариант</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 20:49:22">потом уже подставить адреса</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 20:49:26">чтобы не запариваться</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:50:49">http://pastebin.com/YruRbpxg</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:50:59">1й трейс - карта&lt;br />2й - undocumented</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 20:53:24">Пока его в нормальный вид не приведёшь, фиг прочитаешь. :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:53:48">eue</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:53:49">угу</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:53:51">занимаюсь</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:58:19">undocumented - код программы ghost'ов в виде list'а</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:58:43">могу попробовать отреверсить кодировку</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 20:58:52">если это нужно. может нам ее и так дадут?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 21:5:25">разобрался с кодировкой</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:13:41">так, блин, там же стек, тоесть для функций аргументы в него нужно в обратном порядке складывать</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:13:48">забыл это учесть</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 21:17:32">тест</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:17:53">блин, что-то я чуток подзапутался в этих скоупах… есть два случая: а) (define (f x) (define (g y) (+ x y)) (g 1)) и б) (define (outer x) (define (inner-a y) (+ x y)) (define (inner-b y) (inner-a y)) (inner-b 1))</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:18:18">в первом случае достаточно LDF метка + AP, а для второго нужен DUM+RAP?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:18:20">правильно?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:18:59">тоесть все локальные дефайны видны напрямую на этом же уровне функции?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 21:19:11">да, по идее</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:19:47">а кто нам мешает вообще всё через RAP делать? :) только ограничение на количество опкодов?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:19:50">Тест пассед.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 21:19:54">по идее там надо бы вкорячить flet/labels</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 21:20:4">чтот не так у нас с конфой, меня выкинуло</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 21:20:14">вы получали, что я расшифровал undocumented?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:20:38">последнее сообщение было про «разобрался с кодировкой»</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 21:20:44">гм, что-то ты меня задумал... если предположить что мы нигде ранее не ошиблись, то вобщем да</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 21:20:49">угу</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 21:20:55">можем всё через rap</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 21:21:13">можем. но мне кажется что ap там тоже не просто так</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:21:37">AP и RAP несколько разные.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:21:46">Хотя, DUM + RAP, наверное, разницу сгладит.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 21:22:11">а давайте подумаем: может стоит ввести flet/labels?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:22:26">the current environment frame pointer must point to an empty&lt;br />            frame of size $n;</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 21:22:28">или нафигачим потом эвристику?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:22:30">Вот это для RAP.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:22:49">&amp;quot;set the frame's parent to be the environment frame pointer&lt;br />            from the CLOSURE cell;&amp;quot;</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:22:52">Это для AP.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:23:13">да не, flet/labels избыточен, мы же и так по коду видим, где вызов по адресу, а где по указателю</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:23:24">А разница между flet/labels, если просто вложенные дефайны сделать?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:23:27">ну тоесть не по коду, а по биндингам</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:23:37">Т.е. они уже есть.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:23:46">просто я не очень понял, почему бы всё тупо по указателям не звать </msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:24:25">Ну хз. МОжет, оптимизации.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:24:36">Или сначала сделали AP, потом нужно стало RAP.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:24:39">Так и осталось.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:24:46">Не знаю. Боюсь предполагать.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:26:28">ок, щас ещё немного поразмышляю и попробую что-нибудь изобразить</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:27:59">можно попробовать совсем простую логику: если в принципе есть какие-то декларации внутри функции, то перед всеми вызовами использовать dum/rap, а если нет, то просто ld/ap  </msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:28:52">просто иначе там не совсем тривиально получается — надо ещё на этапе трансляции функции понять, есть ли рекурсивные вызовы внутри саб-функций </msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:29:17">и, соответственно, нужен ли dum/rap</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:29:38">а так просто всегда его рисовать, вне зависимости от того, нужен он там или нет</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:29:56">или я ошибаюсь?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:29:57">Можно пока так попробовать.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:30:5">Я сам не могу пока вкурить разницу.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 21:32:46">а вот такой вопрос, мы в трансляторе проверки должны делать на предмет, например если cdr действительно cons cell подают или нет?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:33:7">я думаю, нет :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 21:33:9">а как мы можем это проверить?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 21:33:14">разве что вывод типа писать</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:33:23">будем считать, что IL всегда генерируется корректный</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 21:33:29">можем, просто это надо анализировать пришедший ast</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 21:33:31">ок</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:33:34">Ну там, на самом деле либо LDF/AP, либо DUM/LDF/RAP</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:34:3">В целом, погонял на симуляторе.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:34:13">Разницы не увидел на придуманных примерах.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:34:16">Они простые, конечно.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:36:20">а что за симулятор?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:36:28">что-то я прослоупочил</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:36:41">http://icfpcontest.org/lman.html</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:37:14">о класс</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:37:34">ладно, я щас пока через rap всё делаю, в любом случае, хотя бы будут работающие функции</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:38:18">Я тоже думаю, что пока так пойдёт.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:38:26">Если не будем влазить - дотюним.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 21:38:38">тесты делать будем?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:39:0">было бы хорошо, если не лень :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 21:39:13">я думаю что надо</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 21:39:23">а то потом ошибки искать...</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 21:39:45">особенно когда начнем впиливать эвристики</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:40:42">Если начнём. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:41:14">я только не понял, а как результаты выполнения функций на стек кладутся?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:41:29">а, всё вроде понял</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 21:41:48">там звучало, что результатов может быть несколько</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 21:42:28">ищу цитату</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:43:3">Там не совсем про это было с несколькими.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 21:43:57">а про что?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 21:44:4">цитаты не нашел</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:44:15">А кладутся просто операцией. Вроде вручную.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 21:44:20">(translate '(&amp;gt;= (car (cons 1 2)) 3)) -&amp;gt; ((:LDC 1) (:LDC 2) (:CONS) (:CAR) (:LDC 3) (:CGTE)) нигде не ошибся?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:44:22">Из енвайронмента или константой.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:44:53">ошибся порядком закладывания в стек, как и я :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 21:45:2">ой, точно</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:45:16">Ага, как раз полез смотреть спеку, чтобы убедиться. :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 21:45:43">/me убег на 20 минут</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:47:7">Да, на стек кладутся просто по выполнению LD, LDC, LDF, CONS.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:47:24">А, CGTE и ему подобные тоже на стек ложат.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 21:47:32">да</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:47:37">Короче, инструкции сами кладут на стек.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:47:51">Ну и LDx для того, чтобы самому положить.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 21:49:35">я тут просидел некоторое время с sel, но пока не выходит ёжик. надо подумать будет как обсчёт смещения в конце сделать.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:50:6">окей, ты тогда, может, ветку свою пока в мастер вмержи? </msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:50:17">Да там обсчёт то не нужно делать.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:50:18">мне ещё минут 10-15 нужно на доделать функции</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:50:21">В целом то.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 21:50:23">ок</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:50:34">Все команды, которые получаются, они занимают 1.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:50:52">Хотя, надо с транслейта получить, а потом уже номера расставить.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:51:14">Ты сейчас как получаешь без обсчитанных меток?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 21:52:34">Ну схема я так понимаю должна быть такая: собираются все лейблы, потом мы знаем что мейн это нулевой адрес и в порядке задания лейблов наращиваем адреса, заменяя токены на адреса или я не прав?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:53:37">Ну тут в два прохода, наверное, должно.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:53:38">ну да, я думаю, достаточно пройтись один раз по получившемуся списку со счётчиком, складывая лейблы в словарь рядом, и второй раз — пересчитать метки в прыжках</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:54:2">Первый транслейт выдает с лейблами, потом по мнемокоду с лейблами меняем на мнемокод с числами.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 21:54:3">там же и вниз и наверх прыгать можно</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:54:35">Да, поэтому второй проход нужен будет.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 21:54:39">ладно, я сейчас буквально на 5 мин отойду, выложу опсы(там кстати совсем немного) и попробую сделать так.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:54:58">Кстати, такой момент с этими адресами.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:55:32">Там же идёт по порядку. Если мы зашли в одну ветку, то прыгаем на неё, а потом нужно в конце перепрыгнуть ту ветку, в которую не надо заходить.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 21:55:53">Иначе он два действия выполнит. :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 22:5:54">Я не мёрджил пока ничего, запушил forms-ops на репу</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 22:9:24">http://pastebin.com/YruRbpxg а вот эта ссылка она откуда?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 22:10:14">всмысле сами данные</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 22:10:27">Это сектоид дебагом в симуляторе вывел.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 22:10:36">понял</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:13:54">я вернулся</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:14:45">grepz: я расшифровал что делает параметр undocumented. в него приходят закодированые программы гостов. </msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 22:15:14">интересно, дадут ли нам кодировку. :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:15:26">ну хз. она там тривиальная</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:15:30">у меня появляется ощущение что надо сделать трансляцию нашего IL и в CL тоже. чтобы отлаживаться. и весь основной код писать на IL</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:15:49">ибо чует мое сердце - неспроста там этот undocumented</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:17:41">swizard: что скажешь насчет добавления 2го таргета трансляции?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 22:18:52">да я не против, IL в CL можно чуть ли не через eval вызвать после минимальных модификаций :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:19:20">давай может тогда в translate закинем параметр?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:19:36">прост не хочу счас править, чтобы конфликтов не нагрести</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 22:21:2">да я думаю можно отдельную функцию написать, в отдельном пакаже</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 22:21:11">там же код разный совсем получается</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:26:12">ок, счас что-то буду соображать</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 22:27:54">ну короче я примерно понял, почему нельзя всё через RAP сделать</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 22:28:6">потому что ему нельзя параметром 0 передать</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 22:28:20">типа DUM 0 / RAP 0</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 22:28:34">ладно, ща исправим быстренько</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:28:40">нельзя? точно?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 22:28:42">:)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 22:29:3">судя по псевдокоду в спеке нельзя</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:29:24">референс на ура сожрал</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:29:28">DUM 0</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 22:29:38">хм, возможно тогда я и ошибаюсь</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 22:29:57">Референ сожрал. Правда, фрейм нулевой создался, конечно.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:30:4">ну и ладно</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 22:30:9">Может, референс кривой? :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:30:10">если создался нулевой - то лано</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:30:23">а вот RAP 0 ругается. но мот вызываю. неверно. дайте минимальный</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:30:28">если под рукой есть</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 22:30:51">По спеке тоже нет таких ограничений.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 22:30:57">DUM 0&lt;br />LDF 4&lt;br />RAP 0&lt;br />STOP&lt;br />RTN</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 22:31:0">Вот это жрёт.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 22:32:19">В общем, не увидел я в спеке, что там должно быть больше 0 параметры для этих инструкций.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:32:22">ага</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:32:34">можно задать вопрос в ирке</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:34:14">спросил в ирке</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 22:34:50">Вижу. )</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 22:35:24">Почему ты написал, что невозможно использовать DUM 0, RAP 0 по спеке? Там то ограничений тоже нет.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 22:36:23">ошибся, извиняюсь</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 22:37:34">Для гостов можно заимплементить обычный вейвлет на цель.  И при гостах чем больше, тем, думаю, будет результативнее.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 22:37:50">Хотя, смотреть надо по карте.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:41:25">да, в спеке нет что $n &amp;gt; 0</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:41:30">я поспешил спрашивать</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 22:46:25">swizard: https://bitbucket.org/skobochka/icfpc-2014/src/a6a265c58ff3bf821d46a472f4c8345632ae92e8/gcc/examples/always-down.lisp?at=master</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 22:46:50">Если я правильно понял, как-то так должен пример выглядеть, которые робота всегда вниз гонит.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 22:47:12">Хотя, тут надо с нашими скоупами согласоваться.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:48:48">доп правило &amp;quot;линковки&amp;quot;: тело функции main идет всегда по адресу 0</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 22:49:15">У нас там многопроходный?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 22:49:47">Или оно просто будет вложено в main?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:49:54">ну, у нас 2 фазы трансляции: il-&amp;gt;sexp, sexp -&amp;gt; text. в каком-то месте мы должны еще заменять label на оффсеты.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 22:50:25">Ну тут сначала просто с синтаксисом надо определиться.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 22:52:37">swizard: тогда так https://bitbucket.org/skobochka/icfpc-2014/src/861c45a3edb2cad137c09ad253c81b080b839462/gcc/examples/always-down.lisp?at=master</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 22:55:40">ближе к 5 уже у меня, голова ватная совсем. Я наверное чуток посплю, а то сильно торможу. Хистори как-то можно запросить у сервака? А то уезжает. Или может на битбакете issues оставить, чтобы сразу мог как проснусь включиться?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 22:56:10">Ты запушил всё, что мог?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 22:56:23">Если запушил, спокойной ночи. :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 22:56:37">да, я там простые опсы сделал. Надо решить будет с адресацией, тогда оставшееся можно будет доделать</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 22:56:54">ладно, всем продуктивной ночи</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:56:57">ночи, grepz</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 22:57:31">спокойной ночи</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 22:57:52">блин там ад конечно с этими функциями, но вроде, наконец, что-то стало вырисовываться</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 22:58:9">есть шанс сделать в ближайшее время</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:58:23">еще эвристика нужна</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 22:58:29">в смысле АИ</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:16:10">свиз, ты используешь какой :metatilities ?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:16:31">да чёрт его знает, который quicklisp приносит</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:17:42">(translate '(define (main initial-state undocumented)&lt;br />              (define (step-function ai-state world-state)&lt;br />                (cons (+ ai-state 1) :down))&lt;br />                  (cons 42 step-function)))&lt;br /></msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:17:51">(DEFINE (MAIN INITIAL-STATE UNDOCUMENTED)&lt;br /> (DEFINE (STEP-FUNCTION AI-STATE WORLD-STATE)&lt;br />  (CONS (+ AI-STATE 1) :DOWN))&lt;br /> (CONS 42 STEP-FUNCTION)) fell through ETYPECASE expression.&lt;br />Wanted one of (ATOM INTEGER).&lt;br />   [Condition of type SB-KERNEL:CASE-FAILURE]&lt;br /></msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:18:15">какого-то дьявола проваливается до translate-atom</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:18:34">Ну на :down, наверное, падает.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:19:20">неа. define</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:19:33">  0: (SB-KERNEL:CASE-FAILURE ETYPECASE (DEFINE (MAIN INITIAL-STATE UNDOCUMENTED) (DEFINE (STEP-FUNCTION AI-STATE WORLD-STATE) (CONS # :DOWN)) (CONS 42 STEP-FUNCTION)) (ATOM INTEGER))&lt;br />  1: (TRANSLATE-ATOM (DEFINE (MAIN INITIAL-STATE UNDOCUMENTED) (DEFINE (STEP-FUNCTION AI-STATE WORLD-STATE) (CONS # :DOWN)) (CONS 42 STEP-FUNCTION)) NIL)&lt;br />      Locals:&lt;br />        SB-DEBUG::ARG-0 = (DEFINE (MAIN INITIAL-STATE UNDOCUMENTED) (DEFINE (STEP-FUNCTION AI-STATE WORLD-STATE) (CONS (+ AI-STATE 1) :DOWN)) (CONS 42 STEP-FUNCTION))&lt;br />        SB-DEBUG::ARG-1 = NIL&lt;br />  2: (TRANSLATE-WALKER (DEFINE (MAIN INITIAL-STATE UNDOCUMENTED) (DEFINE (STEP-FUNCTION AI-STATE WORLD-STATE) (CONS # :DOWN)) (CONS 42 STEP-FUNCTION)) NIL)&lt;br /></msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:20:28">не ну такой код он не умеет транслировать ещё, вы что :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:20:44">Поторопились мы. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:20:47">я как раз вызовы функций доделываю, а консы у grepz должны быть готовы </msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:20:53">надо ещё смержить будет</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:21:11">у меня он даже define не транслирует</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:21:18">лан, сам отлаживать буду</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:21:40">а что за версия? я там просто уже переписал много чего</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:22:8">Нам, наверное, надо какое-то ядро реализовать на этом ассемблере, остальное выразить через ядро.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:22:54">да, мы больше чем надо не программируем :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:23:3">просто без вызовов функций там совсем беда</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:23:10">Ну это основное. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:23:34">ща вспомнил — в sicp в конце как раз компилятор писали, со всеми этими scope’ами и letrec-ами</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:23:46">ща если не осилю опять, надо будет освежить память</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:24:2">кто-то кроме свиза юзал metatilities?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:24:6">Да, там такое было.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:24:20">А что у тебя за проблемы с метатилитисами?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:25:4">тут или приват?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:25:41">все, понял беду</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:25:50">оно не может вложеные функции</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:25:52">паттерн кривой</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:30:3">дока на if-match есть?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="25 23:30:6">Звук джабера разбудил, думаю дело в том, что текущая версия парсера не умеет такое: (translate '((+ 1 x) (+ 2 x))), надо расширить, чтобы парсер комбинировал выражения на одном уровне.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:30:50">а гляньте бранч labels-et-all, я там это всё ориентировочно починил</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:31:1">но сам код в целом в этом бранче нерабочий правда :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:34:53">счас гляну</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:37:58">я щас завёл другую экспериментальную ветку, в которой всё нафиг переделал :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:38:14">как вы думаете, имеет ли вообще смысл позволять несколько форм типа progn</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:38:29">где именно?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:38:35">проблема в том, что каждая форма что-то кладёт на стек</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:38:37">мысль о progn меня тоже только что посещала</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:38:40">Почему бы нет?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:38:47">Теоретически, стек безразмерный.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:38:50">типа (define (x) (+ 1 2) (+ 3 4) (+ x 2))</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:39:2">ну норм</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:39:10">просто у нас ведь нет побочных эффектов, зачем там вообще несколько форм?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:39:14">implicit progn туда</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:39:15">результат-то последний нужен</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:39:16">А что, прямого прыжка нет в gcc?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:39:24">есть через tailcall</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:39:27">как я понял</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:39:31">или tsel</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:39:33">в gcc есть, а в лиспе он зачем?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:39:57">свиз, можно оставить progn, и сделать оптимизатор, который будет выкидывать лишнее</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:40:10">у нас сайд-эффекты могут быть только в set, емнип</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:40:26">можно, но зачем нам вообще set? :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:40:38">во что его компилировать для gcc?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:47:51">эээ. там есть соотв. операция</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:47:58">раздел &amp;quot;Pascal extensions&amp;quot;</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:48:18">CL-TARGET&amp;gt; (translate '(define (main initial-state undocumented)&lt;br />                        (define (step-function ai-state world-state)&lt;br />                         (cons (+ ai-state 1) :down))&lt;br />                        (cons 42 step-function)))&lt;br />=&amp;gt;&lt;br />(DEFUN GCC/MAIN (INITIAL-STATE UNDOCUMENTED)&lt;br />  (DEFUN GCC/STEP-FUNCTION (AI-STATE WORLD-STATE) (CONS (+ AI-STATE 1) :DOWN))&lt;br />  (CONS 42 STEP-FUNCTION))&lt;br />&lt;br />ну, почти оно</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:48:50">LDC 0&lt;br />SEL 3 5&lt;br />RTN&lt;br />;TRUE&lt;br />LDC 2&lt;br />RTN&lt;br />;FALSE&lt;br />LDC 3&lt;br />RTN&lt;br />;END&lt;br /></msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:48:56">Что-то у меня такой иф получился.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:49:12">Иф у нас тоже будет как отдельная форма?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:49:20">Со своим скопом?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:49:59">про скоп не понял</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:50:13">не, форма, но без скопа</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:50:21">у меня кстати идея</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:50:31">commit bf1feaf93484d6744eb6d68fefc2ab54ee29f911 (refs/remotes/origin/labels-et-all)&lt;br />&lt;br />свиз, у тебя в паттерне &lt;br /> (defun translate-define (proc-name proc-args proc-body environment)&lt;br />-  `((:label ,proc-name)&lt;br />-    ,@(translate-walker proc-body (cons proc-args environment))&lt;br />-    (:rtn)))&lt;br />+  (let* ((rec-bindings (reduce (lambda (bindings form)&lt;br />+                                 (if-match (define (?proc-name . ?proc-args) ?forms) form&lt;br />&lt;br />опечатка. должно быть &amp;quot;. forms?&amp;quot;</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:50:50">давайте попробуем примитивнейшего бота накидать сразу на асме руками</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:51:0">чтобы если что хоть что-то в lightning round запостить :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:51:2">Насколько примитивнейшего? :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:51:11">ну который вниз всё время прёт</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:51:13">например</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:51:15">Куда?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:51:31">sectoid: да, опечатка</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:51:37">ну, мона и с этого начать, да-с</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:51:48">turtle: куда запостить? ну в форму орговскую</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:51:56">там же листинг на асме нужен</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:51:57">Куда прёт?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:52:15">бот прет. по карте</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:52:15">бот вниз всё время двигается</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:52:21">можно не только вниз даже</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:52:28">а по часовой стрелке</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:52:41">http://icfpcontest.org/game.html</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:52:45">Вот вправо двигается.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:53:31">LDC  0&lt;br />LDF  4&lt;br />CONS&lt;br />RTN&lt;br />LDC  0&lt;br />LDC  3&lt;br />CONS&lt;br />RTN&lt;br /></msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:53:36">угу</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:53:40">Вот, собственно говоря, с той странички.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="25 23:54:1">ну вот если его проапгрейдить чуток :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:54:25">Там без анализа ситуации смысла нет апгрейдить.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:54:32">дело в том, что для того чтобы даже проверить есть ли дорога впереди - надо уже код иметь неслабый</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:54:34">Можно, конечно, менять направление пока не упрётся.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:54:36">ибо надо cons'в разматывать</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:55:8">но в целом идея интересная</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:55:23">можно на лиспе написать</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:55:31">а на крайняк скомилить можно и вручную</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:56:15">LDC 1&lt;br />SEL 3 5&lt;br />RTN&lt;br />;TRUE&lt;br />LDC 2&lt;br />JOIN&lt;br />;FALSE&lt;br />LDC 3&lt;br />JOIN&lt;br />;END&lt;br /></msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:56:22">Вот такой иф получился.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:56:41">Правда, его как бы вызывать придётся.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:57:15">Если не вызывать, то тогда надо пушить единицу и также SEL'ом.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:57:29">Ну или TSEL'ом, кстати.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:57:52">Но хз.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:58:4">попробуй с TSEL'ом</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:58:10">Наверное, надо также вызывать как и любую функцию, т.е. с енвайронментом.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:58:18">TSEL тоже ничего хорошего не даст.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="25 23:58:27">Надо же как-то переходить дальше.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:58:55">А может у нас быть такое:&lt;br />(define (main)&lt;br />  (define foo (x)&lt;br />    (bar x))&lt;br />  (+ 1 2)&lt;br />  (define bar (y)&lt;br />    (foo y))&lt;br />  (foo 1))&lt;br />&lt;br /></msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="25 23:59:0">?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:0:18">ну вообще теоретически да, и непонятно как это транслировать :( я поэтому на самом деле щас в новом бранче провожу эксперимент со схемовским синтаксисом, с let и letrec</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:0:20">иными словами: define который идет не в начале. и видимый в define'е выше</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:0:33">чтобы более-менее однозначный код был</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:0:36">вот это наверное более правильный подход, свиз</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:0:50">и проще будет транслировать его в CL</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:0:54">для отладки</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:0:59">ага</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:1:8">просто с оригинальным вариантом я реально закопался</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:1:15">а можешь откоммитится ?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:1:21">чтобы я CL-вариант тоже подкрутил</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:1:28">LDC 1&lt;br />SEL 4 6&lt;br />LDC 1&lt;br />TSEL 8 8&lt;br />;TRUE&lt;br />LDC 2&lt;br />JOIN&lt;br />;FALSE&lt;br />LDC 3&lt;br />JOIN&lt;br />;END&lt;br />RTN</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:1:33">ща минут 10 ещё, допишу до работоспособности</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:1:39">Вот такой получился иф. :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:1:41">оок</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:1:41">ветка будет let-letrec-test</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:1:57">Жуть, а не иф.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:2:32">счас взгляну на спеку. скади, turtle, ты какого хочешь поведения добится? conditional call'а или тупо jumpа?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:2:33">хм</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:2:35">ХМ</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:3:15">Я уже добился обычного джампа.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:3:22">Ну после сравнений, конечно.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:6:22">нормальный if</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:6:55">В общем, в бранче sel лежит.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:18:52">положил бранч let-letrec-test — сам letrec я пока не доделал, но предлагаю посмотреть на примеры, переписанные через let/letrec</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:18:56">такое вот у меня предложение</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:19:32">счас гляну</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:24:45">допишу только хелпер</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:30:11">GCC&amp;gt; (translate '(list 1 2 3))&lt;br />&lt;br />((:LDC 0) (:LDC 3) (:CONS) (:LDC 2) (:CONS) (:LDC 1) (:CONS))&lt;br />GCC&amp;gt; (translate '(tuple 1 2 3))&lt;br />&lt;br />((:LDC 3) (:LDC 2) (:CONS) (:LDC 1) (:CONS))&lt;br /></msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:30:15">верно вроде?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:30:41">ага похоже!</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:30:56">хелперы</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:33:44">Я допетрил фишку с undocumented.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:34:20">ну?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:34:22">GCC&amp;gt; (translate '(let ((body (lambda (x) (+ x x))))  (body 21)))&lt;br />((:LDC 21) (:LD 0 0) (:AP 1) (:LABEL BODY) (:LD 0 0) (:LD 0 0) (:ADD) (:RTN))&lt;br /></msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:34:36">Ты говоришь, там код для гостов.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:34:37">свиз, мне кажется, или тут не верный порядок?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:34:45">туртл. ты жжошь)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:34:56">А что не так? :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:35:7">[21:14:45] &amp;lt;sectoid&amp;gt; grepz: я расшифровал что делает параметр undocumented. в него приходят закодированые программы гостов. &lt;br /></msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:35:19">Ну да.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:35:25">Я смысл этого допетрил.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:35:30">ЗАчем так сделано.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:35:44">ну, зачем?)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:35:53">Т.е. нужно будет нашим лямбда-меном читать программы гостов, предсказывать их поведение и выигрывать на этом.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:35:55">чтобы пытаться понять насколько они умные?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:35:59">ага</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:36:6">Чтобы пытаться понять где они пройдут.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:36:25">Тем более, что там где-то минуту на инициализацию дают.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:36:27">я подумал вот еще что: если там нет int 1/int 2 -- они не знают где мы</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:36:29">Зачем так много?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:36:52">Т.е. лябда-мен может прогнать у себя в башке варианты и выбрать один из лучших.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:36:57">ага</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:37:16">Т.е. эмулятор машины мы будем писать внтури IL.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:38:5">Причём разработка гостов - бонус. Мне так кажется.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:38:33">угу</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:38:44">потому я набрасывал работу с ghc в рамках IL</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:39:5">и хочу таки иметь транслятор IL в CL, чтобы нормально отлаживаться</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:40:5">Ну это на сейчас, наверное, не так нужно.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:40:12">swizard: там что-то не так с вызовом. или мы сначала где-то должны еще заполнять таблицу символов?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:40:44">а ты какой вызов имеешь в виду?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:40:48">я гляну щас</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:41:17">local.lisp вроде 1:1 транслируется к local.gcc</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:41:39">c goto.lisp там щас похитрее, я ввожу хелперную функцию</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:46:25">не 1 в 1</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:46:36">а где косяк?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:46:42">  LDC  21&lt;br />  LDF  body     ; load body&lt;br />  AP   1        ; call body with 1 variable in a new frame&lt;br />  RTN&lt;br />body:&lt;br />  LD   0 0      ; var x&lt;br />  LD   0 0      ; var x&lt;br />  ADD&lt;br />  RTN&lt;br />&lt;br />и &lt;br />((:LDC 21) (:LD 0 0) (:AP 1) (:LABEL BODY) (:LD 0 0) (:LD 0 0) (:ADD) (:RTN))</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:46:55">там должен быть не LD, а LDF</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:47:9">эм, а обнови плз ветку</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:47:13">аа</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:47:55">обновил</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:47:57">та же беда</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:47:58">GCC&amp;gt; (translate '(let ((body (lambda (x) (+ x x))))  (body 21)))&lt;br />((:LDC 21) (:LD 0 0) (:AP 1) (:LABEL BODY) (:LD 0 0) (:LD 0 0) (:ADD) (:RTN))&lt;br /></msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:48:23">пардон</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:48:26">хм </msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:48:28">GCC&amp;gt; (translate '(let ((body (lambda (x) (+ x x))))  (body 21)))&lt;br />((:LDC 21) (:LDF BODY) (:AP 1) (:RTN) (:LABEL BODY) (:LD 0 0) (:LD 0 0) (:ADD)&lt;br /> (:RTN))&lt;br /></msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:48:29">мой емакс меня обидел</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:48:33">да, это я слоупок</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:48:33">:)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:48:43">так очень клево</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:49:0">осталось понять, правильно ли транслируется goto.lisp</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:49:33">уже не 1 в 1 точно</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:49:40">блин а напишите кто-нибудь генератор листинга по sexp-ам :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:49:57">да, 1:1 не получается без отдельной стадии оптимизации</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:50:18">там не тот sexp скорее всего</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:50:23">в смысле исходный lisp</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:50:35">а может и тот</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:50:59">а так вообще похоже очень</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:51:10">счас схачу печаталку сорца</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:52:14">Лейблы сделали?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:52:51">лейблы пока напрямую работают</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:53:13">в смысле, для local.gcc и goto.gcc там нет адресов</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:53:13">Просто лейблом? Без адреса?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:53:19">А, ну ладно.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:53:24">Я как раз занимаюсь этим.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:55:0">блин а чего эмулятору не нравится этот код:</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:55:2">  LDF main&lt;br />  AP 0&lt;br />  RTN&lt;br />main:&lt;br />  DUM 2&lt;br />  LDF GO&lt;br />  LDF TO&lt;br />  LDF gzz&lt;br />  RAP 2&lt;br />  RTN&lt;br />gzz:&lt;br />  LDC 1&lt;br />  LD 0 0&lt;br />  AP 1&lt;br />  RTN&lt;br />to:&lt;br />  LDC 1&lt;br />  LD 0 0&lt;br />  SUB&lt;br />  LD 0 1&lt;br />  AP 1&lt;br />  RTN&lt;br />go:&lt;br />  LDC 1&lt;br />  LD 0 0&lt;br />  ADD&lt;br />  LD 0 2&lt;br />  AP 1&lt;br />  RTN&lt;br />  RTN</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:55:25">Что говорит?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:55:29">А, так лейблы же.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:55:38">Он их не кушает.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:55:51">а блин</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:56:31">а как мне руками посчитать адреса для этой программы?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:56:43">мне просто эквивалентность бы сравнить</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:57:23">1 инструкция — это один байт?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:57:31">GCC&amp;gt; (pretty-print-gcc (translate '(let ((body (lambda (x) (+ x x))))  (body 21))) t)&lt;br />&lt;br />    LDC 21&lt;br />    LDF BODY&lt;br />    AP 1&lt;br />    RTN&lt;br />LABEL:&lt;br />    LD 0 0&lt;br />    LD 0 0&lt;br />    ADD&lt;br />    RTN&lt;br /></msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:57:32">так?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:57:41">1 инструкия - 1 шаг</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:57:45">похоже вроде</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:57:50">а, не так</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:57:54">ну счас поправлю</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:57:57">могу &amp;quot;линковщик&amp;quot; тоже написать</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:58:17">GCC&amp;gt; (pretty-print-gcc (translate '(let ((body (lambda (x) (+ x x))))  (body 21))) t)&lt;br />&lt;br />    LDC 21&lt;br />    LDF BODY&lt;br />    AP 1&lt;br />    RTN&lt;br />BODY:&lt;br />    LD 0 0&lt;br />    LD 0 0&lt;br />    ADD&lt;br />    RTN&lt;br /></msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:58:17">который адреса пересчитывает? а напиши :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:58:18">во</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:58:30">Я написал.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:58:31">сча, закоммичусь тока</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:58:33">Секунду.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:58:34">так ок</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:58:35">линковщик?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:58:43">давайте может попробуем ветки помержить?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:58:53">а то бардак какой-то</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:59:9">свиз, давай в мастер притянем твой код</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 0:59:14">он самый прогрессивный вроде</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:59:38">Можно и помержить.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 0:59:40">ок, только напомните мне плз как в гите мержить :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 0:59:56">Я сам не с гитом на Вы. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:0:8">ладно, ща нагуглим</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:0:24">В общем, кто лучше всех умеет в гите мержить - у меня в sel реализация if и размечивание.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:0:35">счас смержу</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:2:9">У меня не пушнулось было, оказывается.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:2:14">Сейчас протолкнул.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:2:16">Имей в виду.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:2:22">sel смержил</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:2:27">сча домержу</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:2:30">Последний? )</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:2:58">счас домержу линкер</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:3:5">и чуть-чуть правку внесу</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:3:43">а ты let-letrec-test в мастер смержил?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:4:34">еще нет</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:4:39">счас там конфликтов до жопы будет</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:4:44">это да :(</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:4:46">счас смержу что легко - и потом let-letrec</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:5:16">туртл, я сделал твой анлабел опциональным. чтобы по-дефолту таки выдавался вариант для людей</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:6:16">Ну, главное, чтобы была возможность для машины вариант сделать.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:6:28">бранч sel смержен и прибит на сервере</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:6:31">прибей у себя</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:6:45">Зачем прибивать? Пусть живёт.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:6:50">Прибём ещё потом.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:7:13">просто захламляет выхлоп</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:7:17">мерж-коммит есть</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:7:21">где его мержили понятно</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:7:28">а имя - просто меточка мозолящая глаза</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:7:33">мержу let-letrec-test</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:10:21">https://github.com/icfpcontest2014/icfpcontest2014.github.io/commit/14fd40ff1bbf03a7b81f6c80b081f527a3acd1f2</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:10:40">блин там походу какие-то паразитные :RTN добавляются иногда </msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:10:52">интересно, два RTN подряд как-то могут помешать?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:10:55">разберемся</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:11:1">свиз, мона я домержу?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:11:5">и бум мучать мастер</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:11:12">да без проблем :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:11:30">я просто тут дебажу асм глазами пока</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:12:13">Так они же не два подряд по факту будут, наверное.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:12:18">Это закрывающие.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:12:26">А так если два подряд, то исполнится только один.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:13:2">ну ок, если сходу косяк не найдётся, то и ничего страшного</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:13:21">(pretty-print-gcc (translate '(let ((body (lambda (x) (+ x x))))  (body 21))) t)&lt;br />&lt;br />    LDC 21&lt;br />    LDF BODY&lt;br />    AP 1&lt;br />    RTN&lt;br />BODY:&lt;br />    LD 0 0&lt;br />    LD 0 0&lt;br />    ADD&lt;br />    RTN&lt;br />NIL</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:13:22">оно?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:13:32">вроде оно</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:13:43">если что, следующий фронт работ — это tail call elimination :) а то циклы у нас всё порушат</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:13:43">Ты там unlable вместо unlabel написал в ифе.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:13:53">GCC&amp;gt; (pretty-print-gcc (translate '(let ((body (lambda (x) (+ x x))))  (body 21))&lt;br />                                  :unlabel t) t)&lt;br />&lt;br />    LDC 21&lt;br />    LDF 4&lt;br />    AP 1&lt;br />    RTN&lt;br />    LD 0 0&lt;br />    LD 0 0&lt;br />    ADD&lt;br />    RTN&lt;br />NIL&lt;br /></msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:13:59">да знаю, счас пофикшу</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:14:27">ловите апдейт</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:15:26">хм. вот сучечки. они чинят в репе, а не чинят на веб-странице?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:15:44">А куда ты translate-if дела?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:16:1">там был</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:16:14">Где?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:16:14">потерял?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:16:26">опс)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:16:27">счас)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:16:29">Сейчас неу. :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:17:3">вот потому и нужен тест-сьют(</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:17:47">вернул</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:17:53">рулесы тоже обновил в репе</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:19:37">теперь надо привести в божеский вид компилятор в CL</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:21:18">ща попробую проверить экзамплы, и потом можно будет попробовать изобразить что-нибудь с ветвлением</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:21:32">хотя бы останов рекурсии, а то мы так ничего не напрограммируем :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:21:47">Хе-хе. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:22:2">молниеносный раунд завтра в 16 заканчивается?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:22:28">в 16 по москве</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:22:36">у вас уже полвторого?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:22:43">ага</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:22:44">Претти-принт ещё не в мастере что ли?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:22:48">в мастере</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:23:6">хм</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:23:10">я же его добавлял</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:23:26">да, чёто нету</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:23:29">а, не запушил</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:23:29">сча</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:24:6">ловите</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:25:3">я переделаю asdf-систему чтобы в корне лежала и все компоненты грузила (gcc, ghc и проч.)?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:25:13">давай!</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:25:29">Ты в чём пишешь? Скобку лишнюю оставил.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:25:42">хотя gcc и ghc можно отдельными asdf-ами оставить</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:25:43">В util.lisp</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:25:51">а корневой пусть их требует</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:26:16">А вот непонятно. Если будем ghc реализовывать внутри gcc, то не хотелось бы два раза одно и то же писать.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:26:16">в емаксе я пишу</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:26:25">У тебя paredit есть?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:26:26">счас сделаю</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:26:34">нету у меня paredit'а</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:26:41">Ну тогда понятно.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:27:9">так у ghc вроде собственный транслятор</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:27:30">Собственный это куда?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:27:34">или ты как-то абстрагировать таргеты хочешь, а парсер IL оставить?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:27:40">У них и архитектура другая - там регистровая машина.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:28:2">парсер/обработчик  ghc надо на IL писать</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:28:10">ибо работать с ним будет изнутри ботика</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:28:11">Просто я к тому, что нам, скорее всего, придётся просчёт гостов делать на лямбда-мене в gcc.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:28:18">да</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:28:19">100%</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:28:51">я хочу обобщить наш парсер IL чуток. разделить на фронт/бек и сделать помимо .gcc еще и common lisp бэк</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:29:55">тогда это на мультиметодах проще изобразить имхо</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:30:27">диспетчеризировать по параметру backend, например, все функции translate-*</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:31:30">так и собирался</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:31:41">счас только заборю asdf</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:31:53">у меня тут под него подпорки стоят для старого продакшн-проекта</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:31:55">окей, я пока поотлаживаю goto.gcc</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:32:7">кто-ниьт желает подумать на ИИ?)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:32:19">с одной стороны он загрузился успешно (уже победа), с другой — не работает в конце :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:32:56">я желаю =), но пока надо доотладить транслятор, конечно </msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:41:27">запушил в мастер багфикс транслятора, теперь goto.gcc заработал в эмуляторе</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:41:58">ну класс же, ща попробуем какой-нибудь цикл изобразить</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:44:13">эм</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:44:20">а чей if? :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:44:27">Что-то у меня претти принт не работает.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:44:36">гляньте я там запушил gcc/examples/simple-loop.lisp</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:44:44">Ааа.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:45:0">а что говорит претти?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:45:51">Да всё уже, разобрался. Думал stream по умолчанию на stdout выводит.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:46:20">а можно его так и проинициализировать, кстати</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:46:32">а кто if писал, признавайтесь :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:46:35">помощь нужна</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:46:38">turtle: добавь значение по-умолчанию</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:46:41">туртл писал</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:46:49">Я писал.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:47:9">Какая помощь нужна?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:47:22">давай попробуем отдебажить на эмуляторе simple-loop.lisp</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:47:35">он как-то работает, но, почему-то, я не вижу результата</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:47:43">я ожидаю 16</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:47:53">а получаю 0</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:48:3">Давай попробуем.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:48:18">У тебя уже есть версия скомпиленная?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:48:35">да, конечно, ща</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:48:36">turtle: поправил pretty-print</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:48:50">    DUM 1&lt;br />    LDF 9&lt;br />    LDF 5&lt;br />    RAP 1&lt;br />    RTN&lt;br />    LDC 0&lt;br />    LD 0 0&lt;br />    AP 1&lt;br />    RTN&lt;br />    LDC 16&lt;br />    LD 0 0&lt;br />    CGTE&lt;br />    SEL 15 17&lt;br />    LDC 1&lt;br />    TSEL 23 23&lt;br />    LD 0 0&lt;br />    JOIN&lt;br />    LDC 1&lt;br />    LD 0 0&lt;br />    ADD&lt;br />    LD 1 0&lt;br />    AP 1&lt;br />    JOIN&lt;br />    RTN&lt;br /></msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:48:50">Я тоже поправил. Ну ладно.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:50:31">там не может быть true с false перепутано?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:50:33">(pretty-print-gcc (translate-file #p&amp;quot;examples/simple-loop.lisp&amp;quot; :unlabel nil) t)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:51:0">может возьмете минимальный пример?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:51:25">типа просто бранч без всего?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:51:28">ща попробуем</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:52:7">Так не ходит он в цикле.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:52:21">тупо (if 1 42 24)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:52:24">Просто бранч работал, когда я смотрел. :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:52:32">может я сломал...</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:52:39">Навряд ли.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:52:46">Я смотрю, вроде норм.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:52:58">Там либо с условием лажа, либо одно из двух. :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:53:10">swizard:  а IL там для этого кода какой?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:53:12">ну вот смотри</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:53:14">(pretty-print-gcc (translate '(let ((f (lambda (x) (if (&amp;gt;= x 16) 100 200)))) (f 0)) :unlabel t) t)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:53:20">эмулятор мне показывает 100</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:53:28">хотя по-идее должно быть 200</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:54:5">Может, надо смотреть &amp;gt;=?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:54:21">а &amp;gt;= чей? :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:54:49">Он спать пошёл. :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:55:0">Но там все операторы одинаковые, по идее.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:55:16">GCC&amp;gt; (pretty-print-gcc (translate '(if 0 42 24) :unlabel t))&lt;br />    LDC 0&lt;br />    SEL 4 6&lt;br />    LDC 1&lt;br />    TSEL 8 8&lt;br />    LDC 42&lt;br />    JOIN&lt;br />    LDC 24&lt;br />    JOIN&lt;br /></msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:55:53">    LDC 1&lt;br />    TSEL 8 8&lt;br />это зойчем?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:56:49">а я похоже понял, там все сравнения через translate-op сделаны</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:56:56">а он порядок аргументов меняет</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:57:5">Может, у них баг?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:57:6">ща проверим</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:57:25">По спеке загружается у, затем х. Сравниваетс х &amp;gt;= у</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:57:49">(defun translate-if (condition-form true-form false-form environment)&lt;br />  (let ((true-label (gensym &amp;quot;true&amp;quot;))&lt;br /> 	(false-label (gensym &amp;quot;false&amp;quot;))&lt;br /> 	(end-label (gensym &amp;quot;end&amp;quot;)))&lt;br />    `(,@(translate-walker condition-form environment)&lt;br /> 	(:sel ,true-label ,false-label)&lt;br /> 	(:ldc 1)&lt;br /> 	(:tsel ,end-label ,end-label)&lt;br /> 	(:label ,true-label)&lt;br />        ,@(translate-walker true-form environment)&lt;br /> 	(:join)&lt;br /> 	(:label ,false-label)&lt;br />        ,@(translate-walker false-form environment)&lt;br />        (:join)&lt;br /> 	(:label ,end-label))))</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:57:59">скажи, что тут делает &lt;br /> 	(:ldc 1)&lt;br /> 	(:tsel ,end-label ,end-label)&lt;br />?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:58:7">LDC 1&lt;br />LDC 0&lt;br />CGTE</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:58:10">блин, перемена операторов не помогает :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:58:12">Это безусловный переход.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:58:25">а зачем он там?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:58:38">Чтобы в конец убежать.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:58:49">Он же с веток join'ом возвращается.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:59:12">а</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 1:59:17">я сосунлей(</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 1:59:33">Похоже, симулятор у них не без грешка. Или меня глючит.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 1:59:35">а не туплю</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:0:9">короче надо так</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:0:10">-    ((= ?form-a ?form-b) (translate-op :ceq ?form-a ?form-b env))&lt;br />-    ((&amp;gt; ?form-a ?form-b) (translate-op :cgt ?form-a ?form-b env))&lt;br />-    ((&amp;gt;= ?form-a ?form-b) (translate-op :cgte ?form-a ?form-b env))&lt;br />+    ((= ?form-a ?form-b) (translate-op :ceq ?form-b ?form-a env))&lt;br />+    ((&amp;gt; ?form-a ?form-b) (translate-op :cgt ?form-b ?form-a env))&lt;br />+    ((&amp;gt;= ?form-a ?form-b) (translate-op :cgte ?form-b ?form-a env))</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:0:15">запушил</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:0:16">CGTE если смотреть на симуляторе, то пере вызовом 0 наверху. Это у. Т.е. у=0, х=1</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:0:28">А, ну да, тогда правильно возвращает 1.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:0:31">ща проверим цикл</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:1:1">whoohoo</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:1:3">работает :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:1:6">хехехе</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:1:19">ну всё, можно сделать перерыв на пожрать =)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:1:32">Мини победа. :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:1:36">потому надо звать их не a/b, а lhs/rhs</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:1:43">ну или l r ;)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:1:47">приятного)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:1:54">Приятного, да.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:2:14">а кто там тесты грозился написать? :) надо бы списки и туплы проверить, что работают</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:2:22">и можно к ai приступать </msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:2:27">без TCO пока</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:2:33">ээ</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:2:39">короче без хвостовой рекурсии пока</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:2:58">но спеку про неё я щас зачитаю в процессе</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:3:11">хвост прикрутим</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:3:22">как вариант можно сделать будет какие-то спец-узлы в АСТ</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:3:30">чтобы оптимизатор полновесный не писать</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:4:25">я опять задумался, а нужен ли CL-бэкенд. может скорее нужен симулятор?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:4:39">не ну по-сути у нас пока настолько убогий IL, что TCO можно тупо через TSEL только для циклов изобразить</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:4:43">Ты пушить будешь?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:4:57">turtle: кому вопрос?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:5:1">Свизарду.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:5:21">а сорри</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:5:27">не заметил что гит обломался</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:5:31">А то он сейчас кушать, думаю подредактировать немного унлабелинг.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:5:45">Чтобы выводил с номером куда прыгать собирается.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:5:51">С комментом.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:6:7">надо добавить узлов вида: (trace something)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:6:7">готово</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:6:10">и (break)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:6:30">брейк не нужен, можно прямо в асм воткнуть инструкцию DBG в эмуляторе</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:6:35">хотя может и нужен</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:6:49">ладно, я brb пока</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:12:4">Как будем библиотечный код оформлять?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:12:45">Надо бы макросню какую-нибудь забубенить.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:12:55">По идее, and будет выражаться через mul.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:13:16">Но если вызовом функции сфигачим, то получим больше кода.  Хотя, можно и так, наверное.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:13:41">дык defmacro аще наш друг и соратник</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:26:30">https://bitbucket.org/skobochka/icfpc-2014/commits/86d6c791130a856a393ab7182fbdd2c1cf35d05f?at=master</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:34:9">вернулся </msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:34:14">как тут дела :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:34:40">отделяю бэкенд от фронтенда, пилю cl-бэкенд</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:34:50">В раздуьмях. Сектоид там бранч создал и фигачит бэкенды и фронтенды. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:34:54">а этой чей коммит в util.lisp:</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:34:55">; caught STYLE-WARNING:&lt;br />;   &amp;amp;OPTIONAL and &amp;amp;KEY found in the same lambda list: (GCC &amp;amp;OPTIONAL&lt;br />;                                                      (STREAM *STANDARD-OUTPUT*)&lt;br />;                                                      &amp;amp;KEY (MINIMIZE NIL))&lt;br /></msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:35:8">поправить?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:35:12">поправь</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:35:26">сектоид в раздумьях: а не делает ли он пургу?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:35:55">Мой коммит был.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:36:11">я вот что думаю</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:36:19">swizard: у тебя там функции не хранятся как переменные?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:36:27">Что?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:36:45">раз у нас как-то заработал IL, то можно потихоньку начинать писать бота — это тоже задача та ещё</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:36:59">например, вычитать из карты нужную клетку</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:37:8">это хелперы</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:37:12">Надо подумать как сделать библиотечные функции.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:37:19">Где их будем держать, как подгружать.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:37:32">можно сделать их макрами, можно сделать функциями</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:37:36">что нам больше нравится?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:37:41">ну на IL никак не сделать, там щас строго (let/letrec ((proc (lambda (…</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:38:0">лучше функциями на IL, конечно :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:38:5">ессно на IL</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:38:7">ассемблер короче будет</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:38:8">но вопрос как</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:38:14">можно макрами</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:38:19">и будет такой себе шитый код</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:38:26">шустрый и огромный</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:39:22">да, но что-то мне подсказывает, что опкоды экономить нужно :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:39:29">угу</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:39:32">ладно давайте тогда так сделаем</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:39:55">я ща пойду прогуляюсь пока минут на двадцать, а то чёто вся туша уже болит в одном положении сидеть</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:40:7">а потом приду и попробую мини-бота на IL сделать</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:40:27">давай. может ходящего по кругу?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:40:58">не, это ничем не лучше ходящего до упора вправо :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:41:8">хотя бы минимального, чтобы на препятствия смотрел</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:41:8">Нам бы always-down.lisp для начала научиться компилировать.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:41:15">Он как раз почти такой.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:41:58">always-down вообще не вопрос, его только переписать на let/letrec надо</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:42:0">ща сделаю</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:42:8">а чего нам там не хватает?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:42:25">там вложенные define, мы же от них отказались</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:45:30">(eval (translate-cl '(if (+ 1 2) 42 24)))</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:45:35">42&lt;br /></msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:45:48">cl-бэкенд это чудесно</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:45:58">а функции?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:46:8">он тривиален выходит%)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:46:13">счас доделаю - пушну</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:48:38">а почему при :unlabel nil у меня лейблы всё равно закомментированы? :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:49:34">Недоработка. :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:49:43">Ну там всё равно на них, закомментированы или нет.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:51:50">я запушил always-down.lisp, теперь его можно скомпилировать</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:51:56">вроде эмулятор жрёт</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:52:59">Мда, код, конечно...</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:53:22">а у нас let/letrec жрет только лямбды?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:53:51"> Trace output&lt;br />lambdaman program (initialisation function) returned wrong result type&lt;br />lambdaman program (initialisation function) returned wrong result type&lt;br />lambdaman program (step function) faulted IllegalAddr&lt;br />lambdaman program (step function) faulted IllegalAddr</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:53:54">Пичаль. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:54:15">да, let/letrec только лямбды</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:54:24">недоработка?) или мы так и хотим?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:54:39">Так не (init) то, наверное, а просто init?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:54:51">по-сути, можно добавить и переменные, но это не горит, пока можно биндинги функциями делать</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:54:58">Даже, наверное, просто лямбду вернуть.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:55:17">для эмулятора скорее (init 0 0)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:55:30">ему же добавить переменных надо</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:55:45">Нам же надо функцию вернуть.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:55:51">Т.е. CLOSURE.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:56:29">по идее let/letrec должен делать скоуп и биндить то, что ему дали</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:56:29">не, в always-down.gcc там конс возвращают</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:56:42">а что уже пришло - то rhs должен решать</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:56:52">А, ну конс. Но в одном из консов - closure.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:56:59">ну так и происходит</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:57:12">Да нет же ж.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 2:57:15">step — это функция</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:57:58">init - тоже функция.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:58:5">Как в гите отревертить файл?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:58:12">отревертить на что?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:58:14">на HEAD?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:58:55">Да, отревертил уже.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:59:0">top-level у нас:&lt;br />(lambda (world-state ghost-prog)&lt;br />   ...&lt;br />   (cons ai-state step-fn))</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:59:16">turtle: ты емакс юзаешь?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:59:26">Да, емакс.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:59:40">советую попробовать magit</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 2:59:48">самая удобная морда к гиту, из всех что я видел</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 2:59:54">Да я как-то редко с гитом.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:0:9">так, вот такое порождает правильный код с одним багом:</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:0:10">(letrec ((step (lambda (ai-state world-state)&lt;br />                 (cons (+ ai-state 1) 2))))&lt;br />  (let ((init (lambda (initial-state unknown)&lt;br />                (cons 42 step))))&lt;br />    (init 0 0)))&lt;br /></msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:0:36">там перепутан номер фрейма для ld почему-то для функции step</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:0:56">Ну баг багом, но возращать должен то он функцию main.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:1:3">если руками изменить LD 2 0 на LD 1 0, то всё ок… ща попробую пофиксить</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:1:19">а он её и возвращает, просто это не main, а init</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:1:20">For LAMBDAMAN, main is a function with two arguments:</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:1:30">смотри</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:1:34">Ну init, main, да.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:1:41">он не должен возвращать функцию main</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:1:56">ребят, мне доделывать common lisp backend или счас лучше вам помочь?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:1:59">А, понял.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:2:4">весь код должен быть такой, чтобы к нему орги добавили LDC 0, LDC 0 допустим, и оно заработало</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:2:21">тоесть  положить на стек initial-state unknown</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:2:30">и пустить интерпретацию</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:3:30">а он разве со стека берет?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:3:34">а давайте прикинем, что нам нужно вообще сделать до lightning round</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:3:37">да со стека</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:3:45">можешь глянуть always-down.gcc</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:4:15">там LDF init / RAP</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:4:16">счас, закоммичусь в бранч и наверное помогу вам</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:5:5">пушнул бранч</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:5:13">там Броукен, его пока не мержить</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:6:6">да, ему и правда приходит в стеке...</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:8:9">а может и нет...</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:8:13">нифига</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:8:45">ему приходит в LD 0 0/LD 0 1</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:9:2">я их дампал, когда реверсил что приходит в undocumented</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:9:26">но это же инструкции, которые кладут содержимое двух переменных на стек :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:9:33">так что всё правильно вроде</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:10:53">свиз, я имею в виду, что для того, чтобы сдампать 1 и 2 параметр в трейс я сделал в начале кода бота вот такое:&lt;br />LD 0 0&lt;br />DBUG&lt;br />LD 0 1&lt;br />DBUG</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:11:5">т.е. я загрузил параметры из энва на стек</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:11:8">чтобы сдампать</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:11:29">т.е. система инициализации AI передает их таки фреймом</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:11:57">а как тогда будет работать оригинальный always-down.gcc?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:12:13">он явно ждёт значения на стеке</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:12:15">а он их просто игнорирует)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:12:40">он ничего не ждет на стеке, кстате</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:12:41">  DUM  2        ; 2 top-level declarations&lt;br />  LDC  2        ; declare constant down&lt;br />  LDF  step     ; declare function step &lt;br />  LDF  init     ; init function&lt;br />  RAP  2        ; load declarations into environment and run init&lt;br /></msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:12:51">DUM 2 - созда пустой фрейм на 2 значения</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:13:52">init != main</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:14:15">ну окей, а как тогда правильно</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:14:17">main == адрес 0. т.е. весь always-down.gcc и есть тело main</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:14:27">смотри</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:14:35">ai.gcc грузится в память</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:14:37">начиная с 0</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:14:50">дальше взводится 0 энвайрмент - 2 значениями</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:14:55">и управление передается на адрес 0</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:15:17">в примере always-down.gcc он на эти параметры (в 0 энвайрменте) просто забивает</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:16:24">тоесть, чтобы получить initial-world-state мне надо что? LD 0 0 ?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:16:28">нам нужен еще какой-то top-level form в IL</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:16:40">LD 0 0, да</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:16:51">чтобы получить ghost-progs -- LD 0 1</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:18:38">ага, и, соответственно, после DUM 2 адреса тоже сдвинутся на 2</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:18:40">хм</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:19:10">ну, после DUM 2, надо брять уже LD 1 0 и LD 1 1</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:19:11">ок можно внести это в топлевел</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:19:17">(translate '(lambda (x y)&lt;br />              (+ x y)) :unlabel nil)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:19:24">нам вот такое бы уметь транслировать</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:19:33">получать то самое глядское тело лямбды</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:19:49">вот только во что...</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:19:59">собсно такая конструкция просто меняет скоуп</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:20:9">говорит транслятору что надо иначе выполнять разрешение имен</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:20:11">да оно уже умеет транслироваться, в принципе-то</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:20:19">ладно, ща я попробую это организовать</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:20:22">надо вынести в translate-walker</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:22:21">получается у нас let/letrec должен именовать переменные, а lambda собсно творить кложуры</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:22:23">по-моему так)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:23:34">у нас в IL у if else-value обязательное?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:23:47">в смысле мы точно хотим сделать его обязательным?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:24:20">не знаю, надо смотреть, как оно транслируется в асм</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:24:48">я как раз хочу предложить более короткую asm-форму</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:24:54">через TSEL</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:28:48">чтот я уже туплю...</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:29:30">я запушил новый вариант always-down.lisp и вариант с toplevel form</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:29:54">теоретически, должно получиться что надо, если в env уже лежат два параметра для main</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:30:17">&amp;quot;у нас в IL у if else-value обязательное?&amp;quot; - это про что?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:30:25">ладно, окей, тогда предлагаю на этом моменте сделать паузу на сон, например :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:30:31">Не вижу пуша.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:30:38">похоже счас у нас (if cond then else)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:30:43">Да.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:30:45">может (if cond then &amp;amp;optional else)?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:30:53">тогда мона оптимизнуть неплохо через tsel</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:31:1">МОжно так. в транслейт просто форму добавить.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:31:9">теперь пуш должен пройти</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:34:33">возможно действительно стоит поспать</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:34:34">Мда.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:34:40">Нафига LD 0 0 в начале?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:34:49">не знаю)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:34:52">Да, надо бы поспать. Пусть grepz с утра разбирается. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:34:56">обновись ещё раз :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:35:16">LD 0 0 / LD 0 1 я сделал только для top-level lambda</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:35:23">типа это main</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:35:28">Всё равно.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:35:36">Та оно же для программы не нужно.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:36:6">свиз</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:36:9">не надо паддить</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:36:20">надо было просто дать возможность делать lambda - top-leve</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:36:21">Короче, не работает.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:36:21">l</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:36:34">ну я вроде так и сделал?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:36:49">последний самый пуш</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:37:27">GCC&amp;gt; (translate '(lambda (x y)&lt;br />              (+ x x)) :unlabel nil)&lt;br />((:LD 0 0) (:LD 0 0) (:ADD) (:RTN))&lt;br /></msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:37:37">вот так должно быть</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:37:52">Да не должно так быть, имхо.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:37:52">паддить вообще ничего не надо)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:38:0">почему не должно?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:38:3">LDC  0&lt;br />LDF  4&lt;br />CONS&lt;br />RTN&lt;br />LDC  0&lt;br />LDC  1&lt;br />CONS&lt;br />RTN&lt;br /></msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:38:8">окей, убрал</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:38:9">Вот, например, простейший бот.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:38:17">это что?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:38:19">Аналог always-down по фунционалу.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:38:24">и?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:38:31">у него (lambda () ...)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:38:53">Я к тому, что он при старте из фрейма ничего не читает и не должен.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:38:56">((:LDC 2) (:LDC 1) (:ADD) (:RTN))</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:39:16">ну, если его не интересует world-state/ghost-state - не должен</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:39:42">а если интересуют - таки должен почитать. ибо эти параметры в main приходят в 0 фрейме</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:39:51">а щас правильно, глянь?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:40:2">Нет, неправильно.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:40:7">Или ты ещё коммитил?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:40:16">ага, оно</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:40:19">в мастер закоммитил</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:40:24">счас все как надо</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:40:27">Нет, неправильно.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:40:32">Оно не работает просто.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:40:37">Ну, начало нормальное.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:40:40">что именно не работает?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:40:41">где не работает?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:40:57">LD 1 1 отваливается сразу же.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:41:16">ну правильно, там же ничего не лежит при старте эмулятора</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:41:29">предполагается, что там должен быть undocumented параметр</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:41:36">turtle ты на каком эмуляторе пробуешь?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:41:44">по крайней мере, sectoid так говорит :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:41:45">http://icfpcontest.org/game.html</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:41:56">да, на этом надо</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:41:57">Нет, норм сейчас.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:42:0">счас проверю</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:42:2">Вдиать, что-то не то копировал.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:43:1">работает</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:43:6">все мы походу устали</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:43:11">swizard герой дня) </msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:43:18">хех</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:43:27">ладно, пошли спать</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:43:41">напишите кто-нибудь grepz вкрадце на чём мы остановились :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:43:43">Да, точняк.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:43:45">так-с, нам по сути остается попробовать написать простой AI на этом лиспе и собрать его корректно в GCC</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:44:0">Нам надо ещё стандартную библиотеку к нему наклепать.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:44:9">Которые будут улучшать и облегчать жизнь.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:44:11">я бы начал с тупо перебирающего R, D, L, U направления</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:44:16">да, нужна библиотека</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:44:34">хм. может счас выдавлю из себя еще каркас для ее создания</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:44:45">мысль: макра вроде defun/gcc</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:44:55">которая пихает AST в какой-нить список</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:45:17">и потом когда мы делаем парс - допиливаем библиотечные функции к основному AST (линкуем либу, гыгы)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:45:46">оформи тогда эту идею в репо, где-нибудь в TODO, может, grepz сделает</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:45:46">перед фазой unlabel</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:46:4">счас если после сигареты не буду чувствовать сил - так и сделаю</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:46:12">а у кого пишутся логи конфы?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:46:21">не знаю, у меня все похерились :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:46:21">может лог в реп закоммитить?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:46:30">по кр. мере прошедших суток</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:46:40">у Азамата вроде полный лог на машине</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:46:49">Да, полный.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:46:54">можешь его в реп</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:46:56">закоммитишь?</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:47:0">в какую-нить директорию log/</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:47:9">пригодится для репорта)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:47:9">Ага.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:47:17">отлично, спасибо</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:47:28">ладно, до завтра </msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:47:37">я надеюсь часам к 10 — 11 встать</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:48:12">аналогично, но по киеву</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 3:48:40">и эта. когда закончится военная заворушка, хочу всех напоить пивом)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:49:8">обязательно :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 3:49:27">всё. я убрёл</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 3:49:47">Я тоже упал. Логи закоммитил. Но они в таком формате, xml-ном. :)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 4:9:6">2 grepz: я добавил простую систему управления библиотечными функциями (см. https://bitbucket.org/skobochka/icfpc-2014/commits/3ba6f95b145baf761545f1a2300d19921274c344)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 4:10:9">надо сделать набор helper'функций для:&lt;br />1. разбора состояния мира (карта, здоровье и т.п.)&lt;br />2. для разбора состояния ЛМ и призраков&lt;br />&lt;br />эти хелперы нам очень пригодятся когда будем писать AI</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 4:10:19">ну и стоит подумать над алгоритмами AI</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 4:10:31">логи того что мы напридумывали-набеседовали - в репе</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 4:10:43">я ушел спать, попробую встать не позже 10-11 по киеву</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 10:31:37">Я тут параллельно на работе, но вроде вкурил всё что вы за вчера сделали, одного непонимаю, почему при трансляции letrec зачем оно помимо задания самой функции ещё и её вызов делает(LDF)?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 11:54:38">&amp;quot;The program for Lambda-Man´s AI was limited to 1048576 instructions.&amp;quot;</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 11:54:43">Начались ограничения.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 11:59:25">стоило ожидать</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:6:7">у нас рекурсивные вызовы делать же нельзя?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 12:7:58">Вроде без всяких оптимзаций можно.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:8:24">непохоже, но может я где-то косячу</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:8:38">не убирает лейбл внутри вызова функции</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:13:18">я там выложил расшифровку состояния мира: world-state.sample и l-man.lisp, где стаб для управления человечком</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:15:56">привет всем</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:16:2">Привет</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 12:16:5">Привет.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:17:23">ща я быстро позавтракаю, почитаю коммиты пока</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 12:18:40">Да там их нет. Я сам минут 15-20 назад проснулся.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:18:42">С утра какой-то глюк в их симуляторе был, спейсы в псевдоассемблере не воспринимал, сейчас починили уже</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:20:4">надо знаете чего, накидать хелперы для работы со списками </msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:20:17">хотя бы размер карты узнать</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:21:4">а по-возможности и клетку получить по её координате</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:22:10">тогда можно написать функцию типа call-with-env, которая будет вызывать коллбек с 4 параметрами — клетками справа/вверху/лева/внизу</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:22:53">рекурсивные вызовы должны работать, я вчера проверял — можно глянуть gcc/examples/simple-loop.lisp</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:23:12">ок, значит я где-то накасячил</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:24:4">а что будет, кстати, если cdr ячейки сравнить с «0», а там cons?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:24:13">в смысле, как конец списка искать?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:24:37">должно ноль наверное вернуть - пустой список</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:24:51">The empty list is encoded as the integer 0.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:25:45">затем и нужна инструкция ATOM(integerp)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:25:52">чтобы не сравнивать список с интами</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:25:54">я так думаю</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:27:38">во точно, атом</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:27:53">сделаете кто-нибудь? :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:28:26">у нас уже был вроде</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:28:38">я сейчас проверю как это работает</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:28:41">найду размеры карты</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:30:31">давай!</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:36:4">progn у нас нет?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:36:27">неа, а зачем он тебе понадобился, кстати?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:36:38">мы вчера думали над его целесообразностью</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:37:9">вроде бы решили, что без побочных эффектов он не нужен</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 12:37:16">deflib/gcc move - что там за число 11?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:37:19">если подумать, то можно вобщем и без него, всё верно</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:37:36">11 - координата</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:37:46">л-ман туда-сюда будет дёргаться</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:38:0">так как в одном случае у него условие выполяется, в другом нет, просто как пример</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 12:38:20">Нам бы эти 3, 1 перевести в нормальный читаемый вариант. :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 12:38:35">Что у нас с топлевел енвайронментом?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:39:10">надо, я сейчас отпинаюсь от работы смогу что-то более-менее нормально запилить.&lt;br />Проверил нахождение размера карты через cdr и integerp - всё как говорилось, работает</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:39:26">turtle: 3 1 без проблем вообще, добавь в translate-walker паттерны типа :down :left :right :bottom</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 12:39:49">Кстати, да, можно вообще туда их захардкодить.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:39:52">там ещё вы убрали условие из translate-op, я его опять ввёл, чтобы сущности не плодить, когда оп с 1 параметром, второй просто не подставляется.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:40:25">иначе cdr/car/integerp работать не будут</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:40:53">ну мы не то, чтобы его убрали, видимо, при мерже у sectoid’a бранчей в мастер что-то потерялось</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:41:26">ясно, а то я сегодня вдуплял долго почему у меня выражение валилось с ошибкой, пока по косточкам до car не добрался. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:42:16">да блин, тесты надо написать, но никто не хочет :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:42:29">grepz, п</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:42:44">а ты закоммитил хелпер по размерам харты?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:43:21">не, пока не комитил, я на работе зависаю, так что отвлекаться приходится</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:43:32">окей</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:43:52">ладно, надо бы что-то спрограммировать бы до 16 часов</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:44:42">а такой вопрос: карта всегда окружена стеной?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:44:52">как в эмуляторе игры?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:45:20">в смысле, можно ли смело заглядывать в ( x - 1 ), ( y - 1 ), или надо проверять, что x и y не нуль?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 12:45:30">я так понимаю что да</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 12:46:6">Написано, что да.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 12:46:48">&amp;quot;Maps are like mazes: they consist of corridors 1-square wide, without open spaces. More formally: there are no 2x2 areas consisting only of non-wall squares.&lt;br />&lt;br />Maps have walls around the edges.&amp;quot;</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:52:41">надо бы ещё cond спрограммировать, а то дерево if-ов неудобно писать</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 12:56:47">Макросистема нужна. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:57:9">да не обязательно пока, можно на уровне translate-walker добавить паттерны</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 12:58:59">и всякие caddr :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:0:29">Надо какие-нибудь босяцие макросы сделать.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:1:25">хм, а откуда у меня там нагенерилось всяких «LDF +» </msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:2:33">я там запушил gcc/examples/bumper-ai.lisp</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:2:47">как-то криво транслируется, собака</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:3:19">да, есть такое, я тоже не пойму, толи я дурак, толи лыжи не едут.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:4:18">паттерн ((+ ?form-a ?form-b) (translate-op :add ?form-a ?form-b env)) почему-то не срабатывает, видимо, проваливается в стандартный proc-invocation</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:6:12">gcc/examples/bumper-ai.lisp ты его в мастер запушил?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:6:57">да, попробуй ещё раз</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:7:13">во, теперь есть</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:7:15">не замечаю, что проклятый гит обламывается иногда при коммите</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:8:19">Босяцкий cond сделал.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:8:41">минут на 15 отойду</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:10:59">нашёл проблему — скобки не так расставил =)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:11:6">странно, почему такой эффект</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:11:8">ну да ладно</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:11:12">Ох уж этот лисп. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:11:14">всё равно не работает :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:11:27">загружается, но tags mismatch</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:11:49">Значит, что-то не туда возвращается.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:12:53">блин как бы всё это продебажить</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:19:38">А у нас nth есть разве?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:19:57">А, вон ты его куда вынес.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:20:21">я там ещё кой-чего пофиксил, но пока всё равно не работает</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:24:36">короче там всё работает кроме функции at-coords </msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:24:40">тоесть, она тоже работает</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:24:52">но результат нельзя сравнить с числом, tags mismatch</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:25:7">блин а как в эмуляторе посмотреть, что она возвращает :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:25:14">DBUG</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:25:17">но если значение уже на стеке</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:25:41">возможно стоит dbug как ф-ию ilisp'а тоже ввести</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:26:0">Там же видн стек в эмуляторе.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:26:4">Или нет?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:26:5">хм а на стек оно как попадает? перед вызовом функции?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:26:21">в http://icfpcontest.org/game.html я стека не вижу</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:26:42">после возврата из ф-ии если вызвать DBUG оно по идее должно показать значение</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:26:46">или хз вобщем</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:30:18">так, исходя из дампа данных, карта лежит в (car world-state). Если не смотреть на качество кода, то вот эта ф-ия по идее должна работать правильно:&lt;br />(deflib/gcc map-size (map x y)&lt;br />  (if (integerp (cdr map))&lt;br />      (if (= x 0)&lt;br />	  (map-size (car map) (+ 1 x) y)&lt;br />	  (cons x y))&lt;br />      (if (= x 0)&lt;br />	  (map-size (cdr map) x (+ 1 y))&lt;br />	  (map-size (cdr map) (+ x 1) y))))&lt;br />А на выходе при попытке сделать (car result) tag mismatch. Я где-то ошибся?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:31:8">у меня такая же фигня с картой</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:31:48">я не могу сделать даже (car (car map))</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:32:5">tag mismatch тоже</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:32:10">очень странно</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:34:13">(deflib/gcc move (ai-state w-state)&lt;br />  (cons 0 (car (car (car w-state)))))</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:34:19">вот такое сработало</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:34:35">да, я щас ровно такой же эксперимент сделал :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:34:48">а если такое же сделать в внутренней ф-ии ?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:34:54">тогда наверное не сработает, так?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:35:2">ща посмотрим</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:35:40">caar и cadr сделал.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:35:56">и во внутренней функции работает</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:36:2">ага</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:36:5">тоже проверил</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:37:53">и даже через рекурсию работает</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:37:58">блин я щас сделал код чтобы если (car (car (car worls-state))) == 0, то бежать направо, иначе налево</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:38:2">побежал налево</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:38:13">что-то я там подзапутался</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:39:20">короче там какая-то проблема явно с этими списками</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:39:54">и даже такое работает:</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:39:55">(deflib/gcc test (map)&lt;br />  (if (integerp (cdr map))&lt;br />      2&lt;br />      (test (cdr map))))&lt;br />&lt;br />(deflib/gcc move (ai-state w-state)&lt;br />  (cons 0 (test w-state)))&lt;br /></msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:39:59">бежит вниз</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:41:56">обана</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:42:16">оказывается, порядок аргументов не надо менять при вызове функции</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:43:9">что-то найти в доке такого не могу</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:45:41">хотя я могу ошибаться…</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:47:4">Да.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:47:11">Самый нижни заполняется в 0.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:47:17">Тот, что выше - дальше.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:47:21">DUM 2&lt;br />LDC 4&lt;br />LDC 5&lt;br />LDF 5&lt;br />RAP 2&lt;br />RTN</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:47:26">Вот вот это если посмотреть.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:47:58">Вероятно там тоже список, поэтому он консами заполняет фрейм со стека.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:48:5">Поэтому обратный порядок и может получиться.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:48:23">тогда я откатываю правку</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:49:0">тогда непонятно с картой вообще</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:49:1">Ну ты в симуляторе тоже глянь, об одном и том же ли мы говорим?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:49:36">эм, я скорее от безысходности спрашиваю, а мы вообще можем большие списки как аргументы передавать?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:50:0">с другой стороны почему бы нет.. в мейн то он попадает</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:50:19">и те тестовые функции его карили и цдрили</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:50:21">Он же на куче просто. И там ссылка.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:50:22">а почему нет, он же указатель просто передаёт на фрейм</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:50:40">ну да, точно</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:51:18">А что там с картой непонятно?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:51:57">да вот собственно более-менее сложный код при работе со списками(картой) отваливается с tag mismatch</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:52:46">Нада найти где он отваливается. :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:53:18">ещё вопрос, cons можно из ф-ии возвращать&amp;gt;</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:53:19">?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:53:31">можно, безусловно</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:53:56">гм</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:53:56">Свиз? Что за непонятки с картой?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:54:6">короче, я локализовал проблему, но непонятно, что с ней делать</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:54:6">походу именно с cons и проблема</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 13:54:21">с cons - tag mismatch, без - всё хорошо</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:54:29">может, это не та проблема, но всё же</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:54:31">А что за проблема?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:55:12">1. вот есть функция: call-with-world (lambda (map) …</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:55:29">2. я её зову так: (call-with-world (car world-state))</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:55:42">3. внутри call-with-world всё работает</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:55:47">теперь я меняю сигнатуру</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:56:1">на call-with-world (lambda (map lman) … )</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:56:21">и зову как (call-with-world (car world-state) (cadr world-state))</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:56:33">tag-mismatch</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:56:42">а теперь я меняю параметры:</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:56:56">(call-with-world (cadr world-state) (car world-state))</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:56:59">и опять работает</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:57:36">то-ли где-то косяк, то ли параметры при вызове функции надо всё-таки не реверсить</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:57:54">ща минут 10 на стенде поэкспериментирую</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:58:14">Ты смотрел в симуляторе l-mana?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:58:20">Тот код, который я дал?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:58:27">Там видно как параметры куда идут.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:58:58">ща я транслятор тогда проверю</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:59:28">Там проблема в соответсвии между LD x x и вызовом.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 13:59:32">Он же с фрейма читает потом.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 13:59:49">не понял</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:0:52">Ну смотри.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:0:57">Пушим в стек - 4</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:1:5">Пушим в стек 5 - (5 4).</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:1:23">Вот эта 4 её мы с фрейма забираем как LD 0 0, а 5 как LD 0 1</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:1:59">ага, вроде так и есть сейчас</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:2:52">хотя так да не так</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:2:53">(let ((proc (lambda (la lb)&lt;br />              (+ (car la) (cdr lb)))))&lt;br />  (proc (cons 1 10) (cons 100 1000)))&lt;br /></msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:3:9">должно быть 1001, получилось 110</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:3:39">где-то лажа, ща погляжу</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:4:24">Ну да, по идее, не надо реверсить.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:4:34">У тебя же после реверса меняется начало с концом.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:4:49">Первый аргумент пропушенный в стек, его по LD 0 0 можно взять.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:5:0">А с реверсом получается, по LD 0 0 идёт последний аргумент.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:5:24">Хотя нет, там непонятно как у тебя назначаются.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:5:56">так, давай ещё раз прикинем на моём примере</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:5:59">как должно быть</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:6:12">Давай.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:6:12">(cons 1 10) — должен быть запушен последним?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:6:20">а сначала (cons 100 1000) ?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:6:25">Не обязательно.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:6:35">Первый конс и должен быть запушен первым.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:6:46">Но это зависит от того как дальше лукап делать.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:6:55">ну да, вот я и определяюсь</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:7:7">Ну допустим, что (cons 1 10) должен быть запушен первым.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:7:24">Если он будет запушен первым, то его надо дальше брать как LD 0 0</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:8:5">понятно, а у меня LD 0 1</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:8:9">ща погляжу</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:8:28">блин и в консе прямой порядок, ну что такое</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:8:51">давайте щас чётко определимся с порядком, и везде унифицируем, а то поломалось же всё</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:9:0">итого: фиксируем обратный порядок?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:9:30">(f a b) -&amp;gt; сначала push b, потом push a, внутри a — это LD 0 0, и b — LD 0 1</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:9:32">ок?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:10:18">так</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:11:8">тогда давайте я сейчас поправлю funcall, а вы посмотрите остальные базовые функции, хорошо?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:11:19">чтобы точно порядок был везде один и тот же</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:11:45">я только одного не пойму, если ошибка действительно в этом, почему код (cons x y) на выходе выполняется нормально, а (cons (- x 1) y)) к примеру уже ломается</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:11:57">* на выходе функции</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:12:22">ну давай я это отдельно посмотрю в эмуляторе после ремонта</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:12:26">ок</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:12:30">может, там просто другая ошибка</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:12:40">я пойду кофе в себя залью тогда</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:17:44">так, вроде пофиксил где можно</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:17:59">ща посмотрю есть ли проблема с возвращаемым cons</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:19:33">что-то там явно не так :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:19:35">(let ((proc (lambda (x y) (cons (- x 1) y))))&lt;br />  (proc 10 10))</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:19:43">результат (10, -9)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:20:4">гм</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:20:47">  $y,%s := POP(%s)&lt;br />  $x,%s := POP(%s)&lt;br />  if TAG($x) != TAG_INT then FAULT(TAG_MISMATCH)&lt;br />  if TAG($y) != TAG_INT then FAULT(TAG_MISMATCH)&lt;br />  $z := $x - $y&lt;br />  %s := PUSH(SET_TAG(TAG_INT,$z),%s)&lt;br />  %c := %c+1</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:20:56">получается перепутаны аргументы</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:21:28">прямо по спеке перепутаны?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:21:58">я сейчас посмотрю как у нас, обновлю gcc</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:22:8">думаю уже поправили бы, если там была ошибка</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:22:12">давай, только pull сделай сначала</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:23:12">хм, там как-то странно</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:23:16">рассмотрим код:</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:23:25">(let ((proc (lambda (x y) (cons (- x 1) y))))&lt;br />  (proc 10 100))&lt;br /></msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:23:30">результат: (10, -99)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:23:32">асм:</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:23:40">    LDC 100&lt;br />    LDC 10&lt;br />    LDF 5&lt;br />    AP 2&lt;br />    RTN&lt;br />;5:&lt;br />    LD 0 1&lt;br />    LDC 1&lt;br />    LD 0 0&lt;br />    SUB&lt;br />    CONS&lt;br />    RTN&lt;br /></msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:24:1">proc — это ;5:</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:24:18">угу</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:24:18">тоесть я сначала пушу в стек LD 0 1 — это y, 100</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:24:22">потом 1</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:24:28">потом LD 0 0 — это 10</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:24:33">делаю SUB</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:24:41">разве я не должен получить 9?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:24:47">и 100 на стеке?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:25:1">именно, оно забирает последние переменные на стэке</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:25:8">а это как раз и будет 10 и 1</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:25:17">а откуда тогда в результате -99 ? :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:25:48">погодь, а если оно стек считает с конца(то бишь начала)?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:26:11">(f a b) -&amp;gt; сначала push b, потом push a, внутри a — это LD 0 0, и b — LD 0 1 - не так.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:26:27">push a&amp;lt; потом push b, внутри a - это LD 0 0.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:26:47">А b LD 0 1. Но сначала надол a пушить.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:26:52">короче, для конса это не там</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:26:54">    LDC 100&lt;br />    LDC 10&lt;br />    CONS&lt;br />    RTN</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:26:59">результат (100, 10)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:27:35">Ну для конса и должен быть такой результат.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:28:25">ок, тогда я для конса конкретно меняю в трансляторе порядок аргументов?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:28:51">Погоди.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:28:56">Я сейчас смотрию в транслятор.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:28:58">гожу</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:29:0">И там всё ок.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:29:12">((:LDC 100) (:LDC 10) (:CONS))</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:29:22">Возвращает (translate '(cons 100 10))</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:29:25">Наоборот.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:29:32">Т.е. так и должно быть.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:29:47">но ты в http://icfpcontest.org/lman.html глянь</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:29:59">Я там и смотрю.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:30:20">так</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:30:22">Так и получается.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:30:38">    LDC 100&lt;br />    LDC 10&lt;br />    CONS&lt;br />    RTN</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:30:46">data stack: (100, 10)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:30:51">а не (10, 100)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:31:1">наоборот должно быть же</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:31:4">Так конс так и работает.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:31:13">ну правильно, он потому что y первой забирает&lt;br /></msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:31:30">$y,%s := POP(%s)&lt;br />  $x,%s := POP(%s)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:31:40">$z := ALLOC_CONS($x,$y)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:32:14">ну тоесть надо менять порядок</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:32:15">(car (cons 10 100))</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:32:16">Тот gcc он же эквивалент (cons 1000 10).</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:32:22">должно быть 10, получаем 100</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:32:26">Зачем? Не надо.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:32:35">turtle :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:32:43"> LDC 100&lt;br /> LDC 10&lt;br /> CONS&lt;br /> CAR&lt;br /> RTN</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:32:47">Получаем 100.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:32:57">но получить-то должны 10!!</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:33:5">Почему?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:33:8">не, и должны 100 получить</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:33:27">смотри: y = 10, x = 100, машина преобразует это в (100, 10)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:33:29">Это cdr 10 должен получить.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:33:32">car забирает x</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:33:45">да вы троллите чтоли меня :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:33:51">Ну спеку глянь. :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:33:55">посмотри в псевдокод cons :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:33:57">вот я в slime проверяю в лиспе: GCC&amp;gt; (car (cons 10 100))&lt;br />10&lt;br /></msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:34:9">CONS - allocate a CONS cell&lt;br />&lt;br />Synopsis: pop two values off the data stack;&lt;br />          allocate a fresh CONS cell;&lt;br />          fill it with the two values;&lt;br />          push the pointer to the CONS cell&lt;br />Syntax: CONS&lt;br />Effect:&lt;br />  $y,%s := POP(%s)&lt;br />  $x,%s := POP(%s)&lt;br />  $z := ALLOC_CONS($x,$y)&lt;br />  %s := PUSH(SET_TAG(TAG_CONS,$z),%s)&lt;br />  %c := %c+1&lt;br /></msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:34:25">так тут транслирует VM оргов то что мы предоставляем</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:34:42">да мало ли какой там псевдокод, это задача транслятора </msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:34:53">не может быть, чтобы (car (cons 10 100)) было 100</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:35:1">то есть мы сначала положили X, потом Y на стэк, VM забрал верхнее - Y, потом X и поменял их местами</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:35:9">(car (cons 10 100))  - для нашего случая надол (car (cons 100 10))</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:35:19">Давай по порядку.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:35:26">Смотрим в слиме  (car (cons 100 10))</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:35:37">Получаем 100.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:35:47">блин, ну объясните мне, почему я не могу в трансляторе поменять местами аргументы в cons для IL :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:35:52">Транслируем: (translate '(car (cons 100 10)))</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:36:2">Получаем ((:LDC 100) (:LDC 10) (:CONS) (:CAR))</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:36:6">Вбиваем в симулятор.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:36:23">Получаем 100.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:36:37">translate = ((:LDC 10) (:LDC 100) (:CONS) (:CAR))</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:36:37">Поменять можешь, просто это неправильно будет.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:36:46">а, всё, разобрался</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:36:48">ну да, получается мы должны менять местами значения</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:36:55">У мееня текущий транслятор 100 сначала делает.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:37:5">(cons 100 10), даёт то что выше, а должно быть наоборот</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:37:7">давайте все вместе сейчас синхронизируем репо, и ещё раз обсудим</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:37:16">Да, после компиляции по другому работает. 6)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:37:18">а то у нас разный код</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:37:25">короче</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:37:31">:)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:37:54">А, потому что там обобщённый код для всех операций.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:38:12">им всё-таки надо было предусмотреть более развёрнутый дебаг. Реально легко запутаться.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:38:14">короче так: там теперь сам translate-op меняет порядок операции</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:38:30">:)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:38:34">Надо глянуть, кстати.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:38:50">давайте сделаем так: пусть translate-op всегда поддерживает прямой порядок</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:39:5">а если надо менять, поменяем в его вызове из translate-walker</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:39:18">да, пожалуй так будет лучше</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:39:45">Да, надо так.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:39:56">Потому что для SUB другой порядок нужен.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:40:1">И div тоже.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:40:2">ща закоммичу</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:40:26">нет, правда, я совсем не удивлён, что LamCo обонкротились :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:40:45">:)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:41:2">так, погодите, а для кого вообще нужен прямой порядок?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:41:8">Кто-то тесты вчера продвигал яро. :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:41:18">было дело. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:41:22">я щас спеку наискосок проглядел — везде   $y,%s := POP(%s)&lt;br />  $x,%s := POP(%s)&lt;br /></msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:41:24">Надо был с них начать.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:41:53">Только вот SUB - $x - $y.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:42:21">А CONS - ALLOC_CONS($x,$y)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:42:21">да, для деления и вычитания</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:42:44">но деления нет, потому только вычитания, все остальные операции коммутативны</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:42:45">Хотя. Сейчас у меня минус тоже неправильно работоал.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:43:23">Ты протолкнул свои изменения?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:43:26">Или правишь пока?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:43:50">правлю пока — я опять с порядком запутался :(</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:44:19">Ну...</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:45:0">Делай прямой порядко.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:45:5">Первый, потом второй.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:45:12">И не ошибёшься, думаю.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:45:58">1.15 осталось, не успеваем</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:46:26">протолкнул</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:46:41">проверьте, пожалуйста, все операции в эмуляторе</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:46:49">ок</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:49:56">арифметику, car/cdr проверил, всё хорошо</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:50:18">надо ещё сравнения и условия</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:50:55">Я тоже посмотрел, нормально.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:50:58">Сравнения проверил.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:51:11">Условия if проверял вчера. :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:51:21">тоже проверил</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:51:23">но вот такой тест опять не работает:</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:51:24">всё работает</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:51:24">(let ((proc (lambda (la lb)&lt;br />              (- (car la) (cdr lb)))))&lt;br />  (proc (cons 1 10) (cons 100 1000)))&lt;br /></msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:51:24">Сейчас when и cond гляну.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:53:36">да блин что ж такое-то</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:53:43">(let ((proc (lambda (la lb) (car la))))&lt;br />  (proc (cons 1 10) (cons 100 1000)))&lt;br /></msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:53:48">почему там 100</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:53:55">    LDC 100&lt;br />    LDC 1000&lt;br />    CONS&lt;br />    LDC 1&lt;br />    LDC 10&lt;br />    CONS&lt;br />    LDF 9&lt;br />    AP 2&lt;br />    RTN&lt;br />;9:&lt;br />    LD 0 0&lt;br />    CAR&lt;br />    RTN&lt;br /></msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:54:14">LD 0 0 в ;9: — это же последний конс?!</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:54:26">Нет, первый.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:54:49">точно?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:54:56">Да, точно.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:55:41">90 получается</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:56:8">как так то</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:56:32">А -999 должно.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:57:5">А потому что создались они не в том порядке.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:57:5">а если поменять порядок аргументов то всё правильно :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:57:14">    LDC 100&lt;br />    LDC 1000&lt;br />    CONS&lt;br />    LDC 1&lt;br />    LDC 10&lt;br />    CONS&lt;br />    LDF 9&lt;br />    AP 2&lt;br />    RTN&lt;br />;9:&lt;br />    LD 0 1&lt;br />    CAR&lt;br />    LD 0 0&lt;br />    CDR&lt;br />    SUB&lt;br />DBUG</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:57:28">LDC 1&lt;br />LDC 10&lt;br />CONS&lt;br />LDC 100&lt;br />LDC 1000&lt;br />CONS&lt;br />LDF 9&lt;br />AP 2&lt;br />RTN&lt;br />;9:&lt;br />LD 0 0&lt;br />CAR&lt;br />LD 0 1&lt;br />CDR&lt;br />SUB&lt;br />RTN</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:57:31">Вот так должно быть.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:57:36">нет</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:57:38">наоборот</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 14:57:40">закоммитил правку, теперь надо глянуть</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:58:18">Ну либо так.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:58:24">Если созддавать в таком порядке.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 14:58:25">во, так правильно</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:59:0">Ну тут надо проверить.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:59:8">Вот почему они изначально создаются с тем порядком?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 14:59:21">Если просто определиться, то уже норм должно быть.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:0:24">мде, не подойдёт такой фикс</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:0:26">Аааа. Сейчас можем запутаться. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:0:33">уже запутались :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:1:7">У нас в translate-op надо порядок создания определить.</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:1:13">надо вобщем отдельно порядок для аргументов при новом фрейме делать и когда нового фрейма нет или я не прав?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:1:15">У нас сейчас там наоборот.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:2:35">ДА нет.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:2:36">блин, надо тесты, конечно</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:2:38">Нормально.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:2:49">я щас там экспериментирую — что-то старое ломается</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:2:53">Для минуса смотрю.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:3:4">Где-то в lambda, скорее всего. Сейчас гляну.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:4:26">Да там тоже вроде всё нормально.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:5:32">В proc беда с текущим кодом.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:5:39">GCC&amp;gt; (translate '(ff 1 2))&lt;br /></msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:5:48">Выдает: ((:LDC 2) (:LDC 1) (:LDF FF) (:AP 2))</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:5:57">А Должен LDC 1 сначала поставить.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:6:20">почему, мы же вроде решили обратный порядок для функций?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:6:47">Ну где-то решили, где-то не решили.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:6:54">lambda, например, другой пордяок.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:7:29">По мне так только в proc сейчас надо прямой порядок поставить и всё.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:8:34">запушил, давайте всё проверять</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:9:47">функция определения размера карты вот сейчас вот начала правильно работать</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:10:22">сейчас все остальные операции проверю</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:12:3">зато у меня перестал работать (car lman) и (cdr lman) :(</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:12:51">у меня зато теперь всё работает</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:12:52">:)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:13:27">(deflib/gcc map-size (map x y)&lt;br />  (if (integerp (cdr map))&lt;br />      (if (= x 0)&lt;br />	  (map-size (car map) (+ 1 x) y)&lt;br />	  (cons x (+ y 1)))&lt;br />      (if (= x 0)&lt;br />	  (map-size (cdr map) x (+ 1 y))&lt;br />	  (map-size (cdr map) (+ 1 x) y))))&lt;br />&lt;br />(deflib/gcc move (ai-state w-state)&lt;br />  (if (= (cdr (map-size (car w-state) 0 0)) 22)&lt;br />      (cons ai-state :left)&lt;br />      (cons ai-state :rigth)))</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:14:42">класс</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:14:48">45 минут ещё :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:14:52">%)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:15:12">блин почему координаты пакмана ломаются у меня</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:15:17">даже карта уже заработала</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:15:33">координы ловишь как (car (cdr l)))?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:15:57">где l =  (car (cdr w-state)))</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:16:8">хм, нет похоже :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:16:10">ща</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:17:50">еее!!</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:18:6">пакман уже зигзагом пробежался =)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:18:11">ща закоммичу ai</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:18:15">давай</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:18:51">Крут. :)</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:19:24">да вообще монстр</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:19:33">bumper-ai.lisp</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:19:44">нету</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:19:46">у меня он убегает в левый угол и застревает там</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:19:53">да блин</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:19:54">ща</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:20:22">ушло</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:20:58">так щас попробую чуть проапгрейдить, чтобы он своё предыдущее направление сохранял в ai-state и старался не бежать назад</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:22:6">Как мы теперь ии компилируем?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:22:21">ну я его просто через translate-file</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:22:51">может перетащим на build-ai-core</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:23:2">чтобы на функции уже разбивать</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:23:9">давай после lightning division :/</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:23:13">ок</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:23:39">много времени с порядком провозились конечно</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:23:51">35 минут осталось, вряд ли уже успеем A* сделать на IL, конечно, но, может, хоть что-то</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:24:12">если хотя бы бегать будет и на поворотах менять направление, уже класс</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:25:17">блин а у нас нету логических «and», «or» и тд?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:25:31">нет</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:25:36">только вложенными when</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:25:41">в условия</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:25:47">давайте мож сделаем</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:26:49">может пока на when, чтобы не огрести багов?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:27:44">ок, но блин код утраивается</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:28:26">условие (and (= x ox) (= y ox)) в лапшу превращается если там есть обе ветки true и false</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:28:36">мдя</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:30:19">А где там утраивается?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:30:32">                                              (let ((can-walk (lambda (x y)&lt;br />                                                                (if (= x (car ai-state))&lt;br />                                                                    (if (= y (cdr ai-state))&lt;br />                                                                        0&lt;br />                                                                        (at-coords x y))&lt;br />                                                                    (at-coords x y)))))&lt;br /></msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:30:40">ну фиг с ним пока</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:35:12">блин всё равно быстро застревает</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:35:14">Кстати, транслирует он его как-то странно.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:35:23">глянте код кто-нибудь bumper-ai</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:36:11">Ты там расставь :up, :down и т.д.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:36:16">А то непонятно. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:37:57">расставил</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:38:6">тока перестало работать, но не из-за этого :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:39:31">У тебя начинается иф lf = 0, и даалее.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:39:39">И когда тоже куда-то не пришло, опять в lf.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:39:44">Т.е. заведомов тупик.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:39:54">Хотя.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:40:2">Там уже точно тупик полный.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:44:24">я запушил examples/experiment.lisp</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:44:34">он рабочий, но там какая-то лажа</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:45:3">если все вызовы для аргументов lman-env с at-coords заменить на can-walk, то всё перестаёт работать</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:45:19">Я пока захардкодил :wall ит.д.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:45:29">хотя can-walk в этом варианте ничего не делает, только зовёт at-coords</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:45:56">так ладно, осталось 15 минут</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:46:6">я предлагаю закоммитить бота experiment.lisp</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:46:20">он хотя бы хоть что-то делает, а не просто в сторону бежит</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:46:25">Давайте. Хотя бы что-то будет.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:46:34">сделаешь?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:46:36">Да.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:46:43">ага, спасио</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:47:0">если я сейчас за 10 минут пофикшу багу, то пересабмитим</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:47:35">А то что у нас return 2 раза зовётся ничего?</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:47:36">хотя думаю ничего</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:49:54">стоп отбой</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:50:19">запушил experiment.lisp ещё раз</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:50:22">что-то вышло</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:50:30">у меня бот аж четверть карты оббежал</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:50:55">ушёл пуш</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:51:35">посмотрите плз всё ли завелось у вас</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:53:11">короче этот вариант однозначно будет застревать в тупиках и бегать по зацикленным пещерам вокруг</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:53:24">но бектрейсинг я уже тупо не успею сделать</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:53:43">Да, работает. )</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:54:24">работает</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:54:36">видно что бот проседает там где решение принимать надо</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:54:46">кол-во инструкций на цикл :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:56:42">лол он походу даже из тупиков вылазит</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:56:54">но зацикливается в кругах</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:57:22">у нас же ai-state это инт?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:57:31">было бы щас не 3 минуты до конца, а 20 — я бы просто пройденный путь сохранял в ai-state</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:57:37">не, au-state — это что угодно</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:57:41">я щас там храню cons</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:57:42">а, ну тогда круто</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:57:57">Вроде отправил.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:58:5">ну класс</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:58:25">Геморно публиковать, потом публиковалку напишу. Завтра.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:58:49">Если что, имя команды - Skobochka, приватный идентификатор - skoba-2014</msg>
 <msg nick="grepz" in="1" from="icfpc-2014@conference.bazon.ru/grepz" time="26 15:58:56">Так, я до дому почапал, где-то наверное с полчаса-час буду отсутствовать.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:59:3">надо ща глянуть, может, scoreboard сделают после lightning division</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:59:11">Ну хз. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:59:14">давай, я тоже щас минут через 15 пойду прогуляюсь</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:59:16">Хотя может быть, конечно.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 15:59:19">Давай.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 15:59:35">а куда делся sectoid, интересно :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 16:3:0">орги дополнительную спеку выложили: http://icfpcontest.org/spec-extra.html </msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 16:3:52">как мы и думали, это tournament между пакманами и гоустами</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 16:4:2">надо программировать гоустов :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 16:4:11">Да.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 16:4:15">Но это мы и знали.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 16:4:54">&amp;quot;It turns out to be an encoding of the ghost programs!&amp;quot;</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 16:4:57">Удивили. :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 16:6:6">Короче, как мы и думали.ю</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 16:6:21">Надо доотлаживать бота и уже писать эмулятор готов на IL.</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 16:7:8">блин, они реально расчитывают, что кто-то напишет на IL полный эмулятор мира с гоустами и в процессе инициализации подберёт стратегию? :) </msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 16:7:19">хотя чем чёрт не шутит, два дня же ещё</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 16:7:59">только я не понял, где можно гоустов поотлаживать</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 16:9:43">Отдельно нигде, вроде бы.</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 16:9:59">Но в мире они туда копипамтятся.</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 16:17:46">sectoid проспал(</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 16:18:5">Доброе утро. :)</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 16:18:14">привет =)</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 16:18:25">сектоид проигнорировал будильники</msg>
 <msg nick="sectoid" in="1" from="icfpc-2014@conference.bazon.ru/sectoid" time="26 16:18:42">мы успели?</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 16:19:6">какое-то решение ушло</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 16:19:18">много времени потеряли на отладке транслятора</msg>
 <msg nick="swizard" in="1" from="icfpc-2014@conference.bazon.ru/swizard" time="26 16:19:28">тестов, конечно, просто ад как не хватает :)</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 16:21:9">Читал экстра спеку?</msg>
 <msg nick="turtle" in="0" from="icfpc-2014@conference.bazon.ru/turtle" time="26 16:21:14">Всё как мы и думали.</msg>
</kopete-history>
